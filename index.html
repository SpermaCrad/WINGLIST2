<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Opening Roulette</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Mobile container */
        @media (max-width: 768px) {
            .container {
                padding: 10px 5px;
            }
            
            .cases-title {
                font-size: 20px !important;
                margin-bottom: 15px !important;
                margin-top: 10px !important;
                letter-spacing: 1px !important;
            }
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .header h1 {
            flex-grow: 1;
            text-align: center;
            margin: 0;
        }

        .profile-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            border: 3px solid #ffd700;
            background-size: cover;
            background-position: center;
            flex-shrink: 0;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }



        .avatar-upload-input {
            display: none;
        }

        /* Mobile profile optimizations */
        @media (max-width: 768px) {
            .profile-avatar {
                width: 45px;
                height: 45px;
                font-size: 18px;
                border: 2px solid #ffd700;
            }
            
            .profile-section {
                gap: 10px !important;
                justify-content: center !important; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø—Ä–æ—Ñ–∏–ª—å */
            }
            
            .currency {
                font-size: 18px !important;
            }
            
            .profile-section button {
                padding: 4px 8px !important;
                font-size: 10px !important;
            }
            
            #debtStatus {
                font-size: 9px !important;
            }
            
            .header {
                margin-bottom: 15px !important;
                margin-top: -20px !important; /* –ü–æ–¥–Ω–∏–º–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤—ã—à–µ */
                padding: 0 10px;
                justify-content: center !important; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –≤–µ—Å—å header */
                flex-direction: column !important; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ */
                align-items: center !important;
                gap: 10px !important;
            }
            
            .header h1 {
                font-size: 20px !important;
                margin: 0 !important;
                order: 2; /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤—Ç–æ—Ä—ã–º */
            }
            
            .header .profile-section {
                order: 1; /* –ü—Ä–æ—Ñ–∏–ª—å –ø–µ—Ä–≤—ã–º */
                margin-bottom: 0 !important;
            }
        }

        .currency {
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
        }

        #balance {
            cursor: pointer;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            padding: 2px 5px;
            border-radius: 3px;
            transition: background-color 0.2s;
        }

        #balance:hover {
            background-color: rgba(255, 215, 0, 0.1);
        }

        .currency::after {
            content: ' ÍôÆ';
        }

        .winglist-section {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            min-width: 240px;
            max-width: 280px;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .winglist-section {
                position: relative; /* –ò–∑–º–µ–Ω—è–µ–º —Å absolute –Ω–∞ relative */
                top: auto;
                left: auto;
                margin: 10px auto 20px auto; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã */
                padding: 8px 10px;
                min-width: 280px; /* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É */
                max-width: 320px;
                border-radius: 10px;
            }
            
            .winglist-title {
                font-size: 14px !important;
                margin-bottom: 5px !important;
            }
            
            .winglist-subtitle {
                font-size: 10px !important;
                margin-bottom: 8px !important;
            }
            
            .winglist-item {
                padding: 3px !important;
                margin: 2px 0 !important;
                font-size: 9px !important;
            }
            
            .winglist-toggle {
                padding: 3px 6px !important;
                font-size: 10px !important;
                margin-top: 5px !important;
            }
            
            .winglist-items {
                max-height: 60px !important;
            }
            
            .winglist-items.expanded {
                max-height: 150px !important;
            }
        }

        .winglist-title {
            font-size: 22px;
            font-weight: bold;
            color: #ffd700;
            text-align: center;
            margin-bottom: 12px;
        }

        .winglist-subtitle {
            font-size: 15px;
            color: #fff;
            text-align: center;
            margin-bottom: 18px;
        }

        .winglist-items {
            max-height: 140px;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .winglist-items.expanded {
            max-height: 350px;
            overflow-y: auto;
        }

        .winglist-toggle {
            text-align: center;
            margin-top: 12px;
            padding: 6px 12px;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            color: #ffd700;
            border: 1px solid rgba(255, 215, 0, 0.3);
            transition: all 0.2s ease;
            user-select: none;
        }

        .winglist-toggle:hover {
            background: rgba(255, 215, 0, 0.3);
            transform: translateY(-1px);
        }

        .winglist-item {
            padding: 8px;
            margin: 4px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            font-size: 12px;
            opacity: 1;
            transition: opacity 0.2s ease;
        }

        .winglist-item.hidden {
            display: none;
        }

        .promo-section {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-bottom: 30px;
            margin-left: 0; /* –£–±–∏—Ä–∞–µ–º —Å–¥–≤–∏–≥ - —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø—Ä–æ–º–æ-–±–ª–æ–∫ */
        }

        /* Mobile promo section */
        @media (max-width: 768px) {
            .promo-section {
                flex-direction: column;
                gap: 8px;
                margin-bottom: 15px;
                padding: 0 10px;
                margin-left: 0; /* –£–±–∏—Ä–∞–µ–º —Å–¥–≤–∏–≥ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
                margin-top: 0; /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø, —Ç–µ–ø–µ—Ä—å WINGLIST –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç */
            }
            
            .promo-frame {
                padding: 8px 16px;
                min-width: 100px;
                transform: none;
            }
            
            .promo-frame h2 {
                font-size: 14px;
            }
            
            .promo-code-frame {
                padding: 8px 16px;
                min-width: 100px;
            }
            
            .promo-code-title {
                font-size: 12px;
            }
            
            .promo-code {
                font-size: 16px;
            }
            
            .countdown-timer {
                font-size: 14px;
                padding: 6px 12px;
            }
        }

        .promo-frame {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            border-radius: 15px;
            padding: 12px 24px;
            text-align: center;
            border: 2px solid #ffd700;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
            display: inline-block;
            width: fit-content;
            min-width: 140px;
            transform: translateY(-12px) translateX(5px);
        }

        .promo-frame h2 {
            font-size: 16px;
            font-weight: bold;
            color: white;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            white-space: nowrap;
            letter-spacing: 0.5px;
            line-height: 1.2;
        }

        .promo-code-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .promo-code-frame {
            background: linear-gradient(145deg, #27ae60, #229954);
            border-radius: 15px;
            padding: 12px 24px;
            text-align: center;
            border: 2px solid #2ecc71;
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
            width: fit-content;
            margin: 0 auto;
            min-width: 140px;
        }

        .promo-code-title {
            font-size: 14px;
            color: #fff;
            margin-bottom: 2px;
            text-align: center;
            line-height: 1.2;
        }

        .promo-code {
            font-size: 18px;
            font-weight: bold;
            color: white;
            margin: 0;
            letter-spacing: 1px;
        }

        .countdown-timer {
            font-size: 18px;
            font-weight: bold;
            color: #e74c3c;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid #e74c3c;
        }

        .cases-title {
            text-align: center;
            font-size: 28px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 30px;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .cases-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Mobile cases grid */
        @media (max-width: 768px) {
            .cases-section {
                grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
                gap: 10px;
                margin-bottom: 20px;
                padding: 0 10px;
            }
            
            .case {
                padding: 15px;
                min-height: 140px;
            }
            
            .case-image {
                width: 100px;
                height: 70px;
                margin-bottom: 10px;
            }
            
            .case-name {
                font-size: 14px;
                margin-bottom: 6px;
            }
            
            .case-price {
                font-size: 14px;
                padding: 6px 12px;
            }
        }

        .case {
            background: linear-gradient(145deg, #2c3e50, #34495e);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid #e74c3c;
            position: relative;
            overflow: hidden;
            min-height: 180px;
        }

        .case.hidden {
            display: none;
        }

        .case:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
            border-color: #c0392b;
        }

        .case.disabled {
            opacity: 0.6;
            cursor: pointer;
        }

        .case-image {
            width: 140px;
            height: 100px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            border-radius: 10px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background-size: cover;
            background-position: center center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–¥–µ–∞–ª—å–Ω–æ */
            transition: background-image 0.3s ease;
            border: 1px solid #34495e;
        }

        .case-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ecf0f1;
        }

        .case-price {
            color: #f39c12;
            font-size: 18px;
            font-weight: bold;
            background: rgba(52, 73, 94, 0.8);
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
        }

        .roulette-section {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }

        .roulette-section.active {
            display: flex;
        }

        .roulette-modal {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            position: relative;
            border: 3px solid #e74c3c;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .case.shake {
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-3px); }
            20%, 40%, 60%, 80% { transform: translateX(3px); }
        }

        .roulette-result {
            text-align: center;
            margin-top: 30px;
            display: none;
        }

        .roulette-result.show {
            display: block;
        }

        .result-item-image {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            background-size: cover;
            background-position: center;
            transform: scale(1);
            transition: transform 0.5s ease;
        }

        .result-item-image.animate {
            transform: scale(1.2);
        }

        .roulette-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }

        .roulette-container {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            border-radius: 15px;
            background: linear-gradient(90deg, #2c3e50, #34495e);
            margin-bottom: 20px;
        }

        .roulette-strip {
            display: flex;
            height: 100%;
            transition: none; /* –£–±–∏—Ä–∞–µ–º –±–∞–∑–æ–≤—É—é –∞–Ω–∏–º–∞—Ü–∏—é, –±—É–¥–µ–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ */
        }

        .roulette-item {
            min-width: 150px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 2px solid #2c3e50;
            padding: 10px;
            position: relative;
            flex-shrink: 0;
        }

        .roulette-item.common { background: linear-gradient(145deg, #95a5a6, #7f8c8d); }
        .roulette-item.rare { background: linear-gradient(145deg, #3498db, #2980b9); }
        .roulette-item.epic { background: linear-gradient(145deg, #9b59b6, #8e44ad); }
        .roulette-item.legendary { background: linear-gradient(145deg, #f39c12, #d68910); }

        .roulette-pointer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4px;
            height: 180px;
            background: #e74c3c;
            z-index: 10;
            border-radius: 2px;
        }

        .roulette-pointer::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid #e74c3c;
        }

        .item-result {
            text-align: center;
            display: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .item-result.show {
            display: block;
        }

        .item-image {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            background-size: cover;
            background-position: center;
        }

        .item-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .item-value {
            font-size: 18px;
            color: #ffd700;
            margin-bottom: 20px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .btn-primary {
            background: linear-gradient(145deg, #3498db, #2980b9);
            color: white;
        }

        .btn-success {
            background: linear-gradient(145deg, #27ae60, #229954);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(145deg, #f39c12, #d68910);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .inventory {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }

        /* Mobile inventory */
        @media (max-width: 768px) {
            .inventory {
                padding: 15px 10px;
                margin-top: 15px;
                border-radius: 10px;
            }
            
            .inventory h3 {
                font-size: 18px;
                margin-bottom: 10px;
            }
            
            .inventory-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
                gap: 10px;
            }
            
            .inventory-item {
                padding: 10px;
                font-size: 10px;
                min-height: 100px;
            }
            
            .inventory-item-icon {
                width: 50px !important;
                height: 50px !important;
                font-size: 20px !important;
                margin-bottom: 6px !important;
            }
        }

        .inventory h3 {
            margin-bottom: 15px;
            text-align: center;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .inventory-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            font-size: 12px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 120px;
        }

        .inventory-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .item-menu-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            z-index: 10000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }

        .item-menu-modal.active {
            display: flex;
        }

        .item-menu-container {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 100%;
            position: relative;
            border: 3px solid #e74c3c;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .item-menu-image {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            background-size: cover;
            background-position: center;
        }

        .item-menu-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .profile-menu-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            z-index: 10001;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
        }

        .profile-menu-modal.active {
            display: flex;
        }

        .profile-menu-container {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            position: relative;
            border: 3px solid #e74c3c;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }

        .profile-menu-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border: 3px solid #ffd700;
            background-size: cover;
            background-position: center;
            margin: 0 auto 20px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .profile-menu-avatar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .profile-menu-avatar::after {
            content: 'üì∑';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2;
            pointer-events: none;
        }

        .profile-menu-avatar:hover::before {
            opacity: 1;
        }

        .profile-menu-avatar:hover::after {
            opacity: 1;
        }

        .profile-menu-avatar:hover {
            transform: scale(1.05);
        }

        .profile-input-group {
            margin: 20px 0;
            text-align: left;
        }

        .profile-input-group label {
            display: block;
            color: white;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .profile-input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #34495e;
            border-radius: 8px;
            background: #2c3e50;
            color: white;
            font-size: 16px;
            box-sizing: border-box;
        }

        .profile-input-group input:focus {
            outline: none;
            border-color: #e74c3c;
        }

        .promocode-input-container {
            position: relative;
            width: 100%;
        }

        .promocode-input-container input {
            padding-right: 50px !important;
        }

        .promocode-submit-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: #f39c12;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 16px;
            transition: all 0.2s ease;
        }

        .promocode-submit-btn:hover {
            background: #d68910;
            transform: translateY(-50%) scale(1.1);
        }

        .promocode-submit-btn:active {
            transform: translateY(-50%) scale(0.95);
        }

        .profile-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }



        .inventory-item-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 5px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background-size: cover;
            background-position: center;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .spinning {
            animation: spin 0.5s linear infinite;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes jumpscareShake {
            0%, 100% { 
                transform: translate(-50%, -50%) translate(0, 0) rotate(0deg) !important; 
            }
            5% { 
                transform: translate(-50%, -50%) translate(-12px, -8px) rotate(-3deg) !important; 
            }
            10% { 
                transform: translate(-50%, -50%) translate(10px, -12px) rotate(2deg) !important; 
            }
            15% { 
                transform: translate(-50%, -50%) translate(-8px, 10px) rotate(-2deg) !important; 
            }
            20% { 
                transform: translate(-50%, -50%) translate(14px, 8px) rotate(3deg) !important; 
            }
            25% { 
                transform: translate(-50%, -50%) translate(-10px, -6px) rotate(-1deg) !important; 
            }
            30% { 
                transform: translate(-50%, -50%) translate(8px, -14px) rotate(2deg) !important; 
            }
            35% { 
                transform: translate(-50%, -50%) translate(-14px, 12px) rotate(-3deg) !important; 
            }
            40% { 
                transform: translate(-50%, -50%) translate(12px, 6px) rotate(2deg) !important; 
            }
            45% { 
                transform: translate(-50%, -50%) translate(-6px, -10px) rotate(-1deg) !important; 
            }
            50% { 
                transform: translate(-50%, -50%) translate(16px, -8px) rotate(3deg) !important; 
            }
            55% { 
                transform: translate(-50%, -50%) translate(-12px, 14px) rotate(-2deg) !important; 
            }
            60% { 
                transform: translate(-50%, -50%) translate(8px, -6px) rotate(1deg) !important; 
            }
            65% { 
                transform: translate(-50%, -50%) translate(-16px, 10px) rotate(-3deg) !important; 
            }
            70% { 
                transform: translate(-50%, -50%) translate(14px, -12px) rotate(2deg) !important; 
            }
            75% { 
                transform: translate(-50%, -50%) translate(-8px, 8px) rotate(-1deg) !important; 
            }
            80% { 
                transform: translate(-50%, -50%) translate(10px, -14px) rotate(2deg) !important; 
            }
            85% { 
                transform: translate(-50%, -50%) translate(-14px, 6px) rotate(-2deg) !important; 
            }
            90% { 
                transform: translate(-50%, -50%) translate(12px, -10px) rotate(1deg) !important; 
            }
            95% { 
                transform: translate(-50%, -50%) translate(-6px, 12px) rotate(-1deg) !important; 
            }
        }

        .roulette-title {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
            color: #ffd700;
        }
        
        @keyframes bannerPulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 5px 20px rgba(231, 76, 60, 0.4);
            }
            50% { 
                transform: scale(1.02);
                box-shadow: 0 8px 30px rgba(231, 76, 60, 0.7);
            }
        }
    </style>
</head>
<body>
    <div class="winglist-section">
        <div class="winglist-title">WINGLIST</div>
        <div class="winglist-subtitle">–£ –Ω–∞—Å –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç!</div>
        <div class="winglist-items" id="winglist-items"></div>
        <div class="winglist-toggle" id="winglist-toggle" onclick="toggleWinglist()" style="display: none;">
            –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ ‚ñº
        </div>
    </div>

    <div class="container">
        <header class="header">
            <div></div>
            <div></div>
            <div class="profile-section">
                <div class="profile-avatar" id="profileAvatar" onclick="handleAvatarClick()">üë§</div>
                <input type="file" class="avatar-upload-input" id="avatarUploadInput" accept="image/*" onchange="handleAvatarUpload(event)">
                <div style="display: flex; flex-direction: column; align-items: center; gap: 8px;">
                    <div class="currency">–ë–∞–ª–∞–Ω—Å: <span id="balance" onclick="handleBalanceClick(event)" title="–¢—Ä–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è">1000</span></div>
                    <button id="debtButton" onclick="takeDebt()" style="
                        background: linear-gradient(145deg, #e74c3c, #c0392b);
                        color: white;
                        border: none;
                        padding: 6px 12px;
                        border-radius: 6px;
                        font-size: 12px;
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
                        white-space: nowrap;
                    " onmouseover="this.style.transform='translateY(-1px)'" onmouseout="this.style.transform='translateY(0)'">
                        üí∞ –í–∑—è—Ç—å –≥–æ—Å–¥–æ–ª–≥
                    </button>
                    <div id="debtStatus" style="
                        font-size: 11px;
                        color: #ff6b6b;
                        text-align: center;
                        display: none;
                        line-height: 1.2;
                    "></div>
                </div>
            </div>
        </header>

        <div class="promo-section">
            <div class="promo-frame">
                <h2>+30% –ù–ê –°–ß–Å–¢</h2>
            </div>
            <div class="promo-code-section">
                <div class="promo-code-title">–ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ–º–æ–∫–æ–¥!</div>
                <div class="promo-code-frame">
                    <div class="promo-code">GLISTOK</div>
                </div>
                <div class="countdown-timer" id="countdownTimer">03:25:00</div>
            </div>
        </div>

        <!-- üö´ –ë–ê–ù–ù–ï–† –ë–õ–û–ö–ò–†–û–í–ö–ò –ö–ï–ô–°–û–í -->
        <div id="blockBanner" style="
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border: 3px solid #fff;
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            text-align: center;
            display: none;
            animation: bannerPulse 2s ease-in-out infinite;
            box-shadow: 0 5px 20px rgba(231, 76, 60, 0.4);
        ">
            <h2 style="color: #fff; font-size: 24px; margin-bottom: 15px;">üö® –ë–õ–û–ö–ò–†–û–í–ö–ê –ê–ö–¢–ò–í–ù–ê üö®</h2>
            <p id="blockMessage" style="color: #fff; font-size: 18px; margin-bottom: 20px; line-height: 1.4;"></p>
            <button id="repentButton" onclick="repent()" style="
                background: linear-gradient(145deg, #27ae60, #229954);
                color: white;
                border: none;
                padding: 12px 25px;
                border-radius: 10px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                margin: 5px;
                transition: all 0.3s ease;
                display: none;
            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                üôè –ü–û–ö–ê–Ø–¢–¨–°–Ø
            </button>

        </div>

        <div class="cases-title">–°–ï–†–ò–ô–ù–´–ï –ö–ï–ô–°–´</div>
        <div class="cases-section">
            <div class="case" data-case="1" data-price="120">
                <div class="case-image" data-case-num="1"></div>
                <div class="case-name">–•—É—é–Ω—Ç–∏–∫</div>
                <div class="case-price">120 ÍôÆ</div>
            </div>
            <div class="case" data-case="2" data-price="200">
                <div class="case-image" data-case-num="2"></div>
                <div class="case-name">–ö–∏–∑–∏–∫</div>
                <div class="case-price">200 ÍôÆ</div>
            </div>
            <div class="case" data-case="3" data-price="150">
                <div class="case-image" data-case-num="3"></div>
                <div class="case-name">–ñ–∞–ª–æ</div>
                <div class="case-price">150 ÍôÆ</div>
            </div>
            <div class="case" data-case="4" data-price="300">
                <div class="case-image" data-case-num="4"></div>
                <div class="case-name">–®–µ—Ä</div>
                <div class="case-price">300 ÍôÆ</div>
            </div>
            <div class="case" data-case="5" data-price="130">
                <div class="case-image" data-case-num="5"></div>
                <div class="case-name">–ì–ª–∏—Å—Ç</div>
                <div class="case-price">130 ÍôÆ</div>
            </div>
            <div class="case" data-case="6" data-price="100">
                <div class="case-image" data-case-num="6"></div>
                <div class="case-name">–ú–µ–æ—Ñ–µ–Ω</div>
                <div class="case-price">100 ÍôÆ</div>
            </div>
            <div class="case" data-case="7" data-price="250">
                <div class="case-image" data-case-num="7"></div>
                <div class="case-name">–ß–í–ö</div>
                <div class="case-price">250 ÍôÆ</div>
            </div>
            <div class="case" data-case="8" data-price="180">
                <div class="case-image" data-case-num="8"></div>
                <div class="case-name">–ë–µ—Ä–µ–≥</div>
                <div class="case-price">180 ÍôÆ</div>
            </div>
            <div class="case" data-case="9" data-price="220">
                <div class="case-image" data-case-num="9"></div>
                <div class="case-name">–ú–æ–ª–æ—Ç</div>
                <div class="case-price">220 ÍôÆ</div>
            </div>
            <div class="case" data-case="10" data-price="160">
                <div class="case-image" data-case-num="10"></div>
                <div class="case-name">–í–∏—Ö—Ä—å</div>
                <div class="case-price">160 ÍôÆ</div>
            </div>
            <div class="case" data-case="11" data-price="350">
                <div class="case-image" data-case-num="11"></div>
                <div class="case-name">–ü—Ä–∏–∑—Ä–∞–∫</div>
                <div class="case-price">350 ÍôÆ</div>
            </div>
            <div class="case" data-case="12" data-price="290">
                <div class="case-image" data-case-num="12"></div>
                <div class="case-name">–õ—ë–¥</div>
                <div class="case-price">290 ÍôÆ</div>
            </div>
            <div class="case" data-case="13" data-price="400">
                <div class="case-image" data-case-num="13"></div>
                <div class="case-name">–û–≥–æ–Ω—å</div>
                <div class="case-price">400 ÍôÆ</div>
            </div>
            <div class="case" data-case="14" data-price="320">
                <div class="case-image" data-case-num="14"></div>
                <div class="case-name">–¢–µ–Ω—å</div>
                <div class="case-price">320 ÍôÆ</div>
            </div>
            <div class="case" data-case="15" data-price="270">
                <div class="case-image" data-case-num="15"></div>
                <div class="case-name">–°–≤–µ—Ç</div>
                <div class="case-price">270 ÍôÆ</div>
            </div>
            <div class="case" data-case="16" data-price="500">
                <div class="case-image" data-case-num="16"></div>
                <div class="case-name">–•–∞–æ—Å</div>
                <div class="case-price">500 ÍôÆ</div>
            </div>
            <div class="case" data-case="17" data-price="450">
                <div class="case-image" data-case-num="17"></div>
                <div class="case-name">–ü–æ—Ä—è–¥–æ–∫</div>
                <div class="case-price">450 ÍôÆ</div>
            </div>
            <div class="case" data-case="18" data-price="380">
                <div class="case-image" data-case-num="18"></div>
                <div class="case-name">–í—Ä–µ–º—è</div>
                <div class="case-price">380 ÍôÆ</div>
            </div>
            <div class="case" data-case="19" data-price="600">
                <div class="case-image" data-case-num="19"></div>
                <div class="case-name">–ö–æ—Å–º–æ—Å</div>
                <div class="case-price">600 ÍôÆ</div>
            </div>
            <div class="case" data-case="20" data-price="750">
                <div class="case-image" data-case-num="20"></div>
                <div class="case-name">–í–µ—á–Ω–æ—Å—Ç—å</div>
                <div class="case-price">750 ÍôÆ</div>
            </div>
        </div>

        <div class="roulette-section" id="rouletteSection">
            <div class="roulette-modal">
                <div class="roulette-title">üé∞ –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–µ–π—Å... üé∞</div>
                <div class="roulette-container">
                    <div class="roulette-strip" id="rouletteStrip"></div>
                    <div class="roulette-pointer"></div>
                </div>
                <div class="roulette-result" id="rouletteResult">
                    <div class="result-item-image" id="resultItemImage"></div>
                    <div class="item-name" id="resultItemName"></div>
                    <div class="item-value" id="resultItemValue"></div>
                    <div class="roulette-buttons">
                        <button class="btn btn-success" onclick="keepItem()">–û—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç</button>
                        <button class="btn btn-warning" onclick="sellItem()">–ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="item-result" id="itemResult">
            <div class="item-image" id="itemImage"></div>
            <div class="item-name" id="itemName"></div>
            <div class="item-value" id="itemValue"></div>
            <div class="action-buttons">
                <button class="btn btn-success" onclick="keepItem()">–û—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç</button>
                <button class="btn btn-warning" onclick="sellItem()">–ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç</button>
            </div>
        </div>

        <div class="inventory">
            <h3>üéí –í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
            <div class="inventory-grid" id="inventoryGrid">
                <div class="inventory-item">
                    <div class="inventory-item-icon" style="background: #95a5a6;">üîß</div>
                    <div>–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç</div>
                </div>
            </div>
        </div>

        <div class="item-menu-modal" id="itemMenuModal">
            <div class="item-menu-container">
                <div class="item-menu-image" id="itemMenuImage"></div>
                <div class="item-name" id="itemMenuName"></div>
                <div class="item-value" id="itemMenuValue"></div>
                <div class="item-menu-buttons">
                    <button class="btn btn-warning" onclick="sellItemFromMenu()">–ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç</button>
                    <button class="btn btn-primary" onclick="closeItemMenu()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <div class="profile-menu-modal" id="profileMenuModal">
            <div class="profile-menu-container">
                <h3 style="color: #ffd700; margin-bottom: 20px;">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h3>
                <div class="profile-menu-avatar" id="profileMenuAvatar" onclick="openAvatarUpload()">üë§</div>
                
                <div class="profile-input-group">
                    <label for="nicknameInput">–ù–∏–∫–Ω–µ–π–º:</label>
                    <input type="text" id="nicknameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20">
                </div>
                

                
                <div class="profile-input-group">
                    <label for="promocodeInput">–ü—Ä–æ–º–æ–∫–æ–¥:</label>
                    <div class="promocode-input-container">
                        <input type="text" id="promocodeInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥" maxlength="20" style="text-transform: uppercase;" onkeydown="handlePromocodeKeydown(event)" onclick="handlePromocodeInputClick(event)">
                        <button class="promocode-submit-btn" onclick="activatePromocode()" title="–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥">‚Üí</button>
                    </div>
                    <div style="font-size: 12px; color: #95a5a6; margin-top: 5px;">
                        –í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞
                    </div>
                    <div id="promocodeMessage" style="font-size: 12px; margin-top: 5px; display: none;"></div>
                </div>
                
                <div class="profile-buttons">
                    <button class="btn btn-success" onclick="saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="btn btn-primary" onclick="closeProfileMenu()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <div class="profile-menu-modal" id="noDropsModal">
            <div class="profile-menu-container">
                <h3 style="color: #e74c3c; margin-bottom: 20px;">‚ö†Ô∏è –ù–µ—Ç –¥—Ä–æ–ø–æ–≤!</h3>
                <p style="color: white; font-size: 18px; margin-bottom: 30px; text-align: center;">
                    –î–ª—è —ç—Ç–æ–≥–æ –∫–µ–π—Å–∞ –µ—â—ë –Ω–µ—Ç –¥—Ä–æ–ø–∞!
                </p>
                <div style="text-align: center;">
                    <button class="btn btn-primary" onclick="closeNoDropsModal()">–û–ö</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let balance = 1000;
        let currentItem = null;
        let inventory = [
            { name: '–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç', image: 'dropcase1_1', rarity: 'common', value: 10 }
        ];
        let userNickname = '–ò–≥—Ä–æ–∫';
        let userAvatar = null; // –•—Ä–∞–Ω–∏—Ç base64 –¥–∞–Ω–Ω—ã–µ –∞–≤–∞—Ç–∞—Ä–∞
        let balanceClickCount = 0;
        let balanceClickTimer = null;
        
        // –ó–∞—â–∏—Ç–∞ –æ—Ç –º–∏—Å–∫–ª–∏–∫–æ–≤
        let rouletteProtection = false; // –§–ª–∞–≥ –∑–∞—â–∏—Ç—ã —Ä—É–ª–µ—Ç–∫–∏
        let caseCooldowns = {}; // –ö—É–ª–¥–∞—É–Ω—ã –¥–ª—è –∫–µ–π—Å–æ–≤
        
        // üèõÔ∏è –°–ò–°–¢–ï–ú–ê –ì–û–°–î–û–õ–ì–ê
        let hasDebt = false; // –ï—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ–ª–≥
        let debtCasesLeft = 0; // –°–∫–æ–ª—å–∫–æ –∫–µ–π—Å–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ —Å–ø–∏—Å–∞–Ω–∏—è
        let isBlocked = false; // –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ –¥–æ—Å—Ç—É–ø –∫ –∫–µ–π—Å–∞–º
        let hasBadCredit = false; // –ü–ª–æ—Ö–æ–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ (–Ω–µ –≤–µ—Ä–Ω—É–ª –¥–æ–ª–≥ —Ö–æ—Ç—è –±—ã —Ä–∞–∑)

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¢–í–û–ò–• –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥—Ä–æ–ø–æ–≤
        function loadDropImage(imageElement, imageName) {
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
            imageElement.textContent = '';
            
            const img = new Image();
            img.onload = () => {
                // –¢–≤–æ—ë –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
                imageElement.style.backgroundImage = `url('${imageName}.png')`;
                imageElement.style.backgroundSize = 'cover';
                imageElement.style.backgroundPosition = 'center';
                imageElement.textContent = '';
                
                console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${imageName}.png`);
            };
            img.onerror = () => {
                // –¢–≤–æ—ë –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ù–ï –Ω–∞–π–¥–µ–Ω–æ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∏–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç —Å "?"
                imageElement.style.backgroundImage = 'none';
                const currentBg = imageElement.style.backgroundColor;
                if (!currentBg || currentBg === '') {
                    imageElement.style.backgroundColor = '#3498db';
                }
                imageElement.textContent = '?';
                imageElement.style.display = 'flex';
                imageElement.style.alignItems = 'center';
                imageElement.style.justifyContent = 'center';
                
                // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —ç–ª–µ–º–µ–Ω—Ç–∞
                const elementWidth = imageElement.offsetWidth || 80;
                const fontSize = Math.max(16, elementWidth * 0.4);
                imageElement.style.fontSize = `${fontSize}px`;
                imageElement.style.color = 'white';
                imageElement.style.fontWeight = 'bold';
                
                console.log(`‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${imageName}.png - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–ª—É—à–∫—É`);
            };
            img.src = `${imageName}.png`; // –ò—â–µ—Ç dropcase1_1.png, dropcase2_5.png –∏ —Ç.–¥.
        }

        // –ù–∏–∫–∞–∫–∏—Ö –∞—Å—Å–µ—Ç–æ–≤ - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã–µ —Ñ–∞–π–ª—ã!

        // –£–ù–ò–ö–ê–õ–¨–ù–ê–Ø –≠–ö–û–ù–û–ú–ò–ö–ê: –∫–∞–∂–¥—ã–π –¥—Ä–æ–ø –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ
        // –ü–†–ê–í–ò–õ–û: –≤—Å–µ –¥—Ä–æ–ø—ã —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –ø–æ —Ü–µ–Ω–µ, –Ω–µ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –Ω–∞–∑–≤–∞–Ω–∏–π
        const items = {
            1: [ // –ö–µ–π—Å 120 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 12 –¥–æ 180 ÍôÆ
                { name: '–•—É—é–Ω—Ç–∏–∫ –ö–∞–º–µ–Ω—å', image: 'dropcase1_3', rarity: 'common', value: 12, weight: 35 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –ü–∞–ª–∫–∞', image: 'dropcase1_2', rarity: 'common', value: 17, weight: 30 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –í–µ—Ä—ë–≤–∫–∞', image: 'dropcase1_4', rarity: 'common', value: 23, weight: 25 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –ù–æ–∂', image: 'dropcase1_1', rarity: 'common', value: 31, weight: 20 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –õ—É–∫', image: 'dropcase1_8', rarity: 'common', value: 42, weight: 15 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –ë—Ä–æ–Ω—è', image: 'dropcase1_6', rarity: 'rare', value: 58, weight: 12 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –ú–µ—á', image: 'dropcase1_7', rarity: 'rare', value: 76, weight: 10 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –©–∏—Ç', image: 'dropcase1_5', rarity: 'rare', value: 98, weight: 8 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç', image: 'dropcase1_10', rarity: 'rare', value: 125, weight: 5 },
                { name: '–•—É—é–Ω—Ç–∏–∫ –ó–µ–ª—å–µ', image: 'dropcase1_9', rarity: 'epic', value: 180, weight: 2 }
            ],
            2: [ // –ö–µ–π—Å 200 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 20 –¥–æ 300 ÍôÆ
                { name: '–ö–∏–∑–∏–∫ –ö–ª–∏–Ω–æ–∫', image: 'dropcase2_1', rarity: 'common', value: 20, weight: 35 },
                { name: '–ö–∏–∑–∏–∫ –©–∏—Ç', image: 'dropcase2_2', rarity: 'common', value: 28, weight: 30 },
                { name: '–ö–∏–∑–∏–∫ –ó–µ–ª—å–µ', image: 'dropcase2_3', rarity: 'common', value: 39, weight: 25 },
                { name: '–ö–∏–∑–∏–∫ –ê–º—É–ª–µ—Ç', image: 'dropcase2_6', rarity: 'common', value: 52, weight: 20 },
                { name: '–ö–∏–∑–∏–∫ –ü–µ—Ä—á–∞—Ç–∫–∏', image: 'dropcase2_9', rarity: 'rare', value: 69, weight: 15 },
                { name: '–ö–∏–∑–∏–∫ –ü–æ—Å–æ—Ö', image: 'dropcase2_7', rarity: 'rare', value: 89, weight: 12 },
                { name: '–ö–∏–∑–∏–∫ –ö–æ–ª—å—Ü–æ', image: 'dropcase2_4', rarity: 'rare', value: 114, weight: 10 },
                { name: '–ö–∏–∑–∏–∫ –°–∞–ø–æ–≥–∏', image: 'dropcase2_10', rarity: 'rare', value: 143, weight: 8 },
                { name: '–ö–∏–∑–∏–∫ –ú–æ–Ω–µ—Ç–∞', image: 'dropcase2_5', rarity: 'epic', value: 185, weight: 5 },
                { name: '–ö–∏–∑–∏–∫ –ö–æ—Ä–æ–Ω–∞', image: 'dropcase2_8', rarity: 'epic', value: 250, weight: 2 }
            ],
            3: [ // –ö–µ–π—Å 150 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 15 –¥–æ 225 ÍôÆ
                { name: '–ñ–∞–ª–æ –Ø–¥', image: 'dropcase3_3', rarity: 'common', value: 15, weight: 35 },
                { name: '–ñ–∞–ª–æ –î—Ä–æ—Ç–∏–∫', image: 'dropcase3_6', rarity: 'common', value: 24, weight: 30 },
                { name: '–ñ–∞–ª–æ –®–∏–ø', image: 'dropcase3_8', rarity: 'common', value: 35, weight: 25 },
                { name: '–ñ–∞–ª–æ –°—Ç—Ä–µ–ª–∞', image: 'dropcase3_7', rarity: 'common', value: 48, weight: 20 },
                { name: '–ñ–∞–ª–æ –ö–æ–ª—å—á—É–≥–∞', image: 'dropcase3_2', rarity: 'rare', value: 64, weight: 15 },
                { name: '–ñ–∞–ª–æ –ö–ª–∏–Ω–æ–∫', image: 'dropcase3_1', rarity: 'rare', value: 83, weight: 12 },
                { name: '–ñ–∞–ª–æ –ú–∞—Å—Ç–µ—Ä–∞', image: 'dropcase3_10', rarity: 'rare', value: 106, weight: 10 },
                { name: '–ñ–∞–ª–æ –õ—É–∫', image: 'dropcase3_4', rarity: 'rare', value: 132, weight: 8 },
                { name: '–ñ–∞–ª–æ –°–∞–ø—Ñ–∏—Ä', image: 'dropcase3_5', rarity: 'epic', value: 162, weight: 5 },
                { name: '–ñ–∞–ª–æ –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ', image: 'dropcase3_9', rarity: 'epic', value: 196, weight: 2 }
            ],
            4: [ // –ö–µ–π—Å 300 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 30 –¥–æ 450 ÍôÆ
                { name: '–®–µ—Ä –≠–ª–∏–∫—Å–∏—Ä', image: 'dropcase4_3', rarity: 'common', value: 30, weight: 35 },
                { name: '–®–µ—Ä –ö–∏–Ω–∂–∞–ª', image: 'dropcase4_6', rarity: 'common', value: 46, weight: 30 },
                { name: '–®–µ—Ä –°–µ–∫–∏—Ä–∞', image: 'dropcase4_9', rarity: 'common', value: 65, weight: 25 },
                { name: '–®–µ—Ä –©–∏—Ç', image: 'dropcase4_2', rarity: 'common', value: 87, weight: 20 },
                { name: '–®–µ—Ä –ú–µ—á', image: 'dropcase4_1', rarity: 'rare', value: 112, weight: 15 },
                { name: '–®–µ—Ä –ë—É–ª–∞–≤–∞', image: 'dropcase4_7', rarity: 'rare', value: 141, weight: 12 },
                { name: '–®–µ—Ä –ê–ª–µ–±–∞—Ä–¥–∞', image: 'dropcase4_10', rarity: 'rare', value: 174, weight: 10 },
                { name: '–®–µ—Ä –õ—É–∫', image: 'dropcase4_4', rarity: 'rare', value: 211, weight: 8 },
                { name: '–®–µ—Ä –†—É–±–∏–Ω', image: 'dropcase4_5', rarity: 'epic', value: 253, weight: 5 },
                { name: '–®–µ—Ä –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π', image: 'dropcase4_8', rarity: 'epic', value: 300, weight: 2 }
            ],
            5: [ // –ö–µ–π—Å 130 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 13 –¥–æ 195 ÍôÆ
                { name: '–ì–ª–∏—Å—Ç –≠–ª–∏–∫—Å–∏—Ä', image: 'dropcase5_3', rarity: 'common', value: 13, weight: 35 },
                { name: '–ì–ª–∏—Å—Ç –ß–µ—Ä–≤—å', image: 'dropcase5_6', rarity: 'common', value: 21, weight: 30 },
                { name: '–ì–ª–∏—Å—Ç –õ–∏—á–∏–Ω–∫–∞', image: 'dropcase5_7', rarity: 'common', value: 32, weight: 25 },
                { name: '–ì–ª–∏—Å—Ç –ö–æ–∫–æ–Ω', image: 'dropcase5_8', rarity: 'common', value: 45, weight: 20 },
                { name: '–ì–ª–∏—Å—Ç –ú—É—Ç–∞–Ω—Ç', image: 'dropcase5_10', rarity: 'rare', value: 61, weight: 15 },
                { name: '–ì–ª–∏—Å—Ç –ë—Ä–æ–Ω—è', image: 'dropcase5_2', rarity: 'rare', value: 79, weight: 12 },
                { name: '–ì–ª–∏—Å—Ç –ö–ª–∏–Ω–æ–∫', image: 'dropcase5_1', rarity: 'rare', value: 101, weight: 10 },
                { name: '–ì–ª–∏—Å—Ç –õ—É–∫', image: 'dropcase5_4', rarity: 'rare', value: 126, weight: 8 },
                { name: '–ì–ª–∏—Å—Ç –ö–æ—Ä–æ–ª–µ–≤–∞', image: 'dropcase5_9', rarity: 'epic', value: 155, weight: 5 },
                { name: '–ì–ª–∏—Å—Ç –ê–ª–º–∞–∑', image: 'dropcase5_5', rarity: 'epic', value: 188, weight: 2 }
            ],
            6: [ // –ö–µ–π—Å 100 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 10 –¥–æ 150 ÍôÆ
                { name: '–ú–µ–æ—Ñ–µ–Ω –ü–æ—Ä–æ—à–æ–∫', image: 'dropcase6_8', rarity: 'common', value: 10, weight: 35 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –¢–∞–±–ª–µ—Ç–∫–∞', image: 'dropcase6_6', rarity: 'common', value: 16, weight: 30 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –ó–µ–ª—å–µ', image: 'dropcase6_3', rarity: 'common', value: 25, weight: 25 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –ö–∞–ø—Å—É–ª–∞', image: 'dropcase6_7', rarity: 'common', value: 36, weight: 20 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –†–∞—Å—Ç–≤–æ—Ä', image: 'dropcase6_9', rarity: 'rare', value: 49, weight: 15 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –©–∏—Ç', image: 'dropcase6_2', rarity: 'rare', value: 65, weight: 12 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –ú–µ—á', image: 'dropcase6_1', rarity: 'rare', value: 84, weight: 10 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –õ—É–∫', image: 'dropcase6_4', rarity: 'rare', value: 107, weight: 8 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –ò–∑—É–º—Ä—É–¥', image: 'dropcase6_5', rarity: 'epic', value: 133, weight: 5 },
                { name: '–ú–µ–æ—Ñ–µ–Ω –°—ã–≤–æ—Ä–æ—Ç–∫–∞', image: 'dropcase6_10', rarity: 'epic', value: 164, weight: 2 }
            ],
            7: [ // –ö–µ–π—Å 250 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 25 –¥–æ 375 ÍôÆ
                { name: '–ß–í–ö –°—Ç–∏–º—É–ª—è—Ç–æ—Ä', image: 'dropcase7_3', rarity: 'common', value: 25, weight: 35 },
                { name: '–ß–í–ö –ë—Ä–æ–Ω–µ–∂–∏–ª–µ—Ç', image: 'dropcase7_8', rarity: 'common', value: 38, weight: 30 },
                { name: '–ß–í–ö –ö–ª–∏–Ω–æ–∫', image: 'dropcase7_1', rarity: 'common', value: 54, weight: 25 },
                { name: '–ß–í–ö –ë—Ä–æ–Ω—è', image: 'dropcase7_2', rarity: 'common', value: 73, weight: 20 },
                { name: '–ß–í–ö –ê–≤—Ç–æ–º–∞—Ç', image: 'dropcase7_6', rarity: 'rare', value: 95, weight: 15 },
                { name: '–ß–í–ö –ì—Ä–∞–Ω–∞—Ç–æ–º—ë—Ç', image: 'dropcase7_7', rarity: 'rare', value: 121, weight: 12 },
                { name: '–ß–í–ö –°–Ω–∞–π–ø–µ—Ä–∫–∞', image: 'dropcase7_4', rarity: 'rare', value: 151, weight: 10 },
                { name: '–ß–í–ö –ö–æ–º–∞–Ω–¥–∏—Ä', image: 'dropcase7_9', rarity: 'rare', value: 186, weight: 8 },
                { name: '–ß–í–ö –ê–ª–º–∞–∑', image: 'dropcase7_5', rarity: 'epic', value: 227, weight: 5 },
                { name: '–ß–í–ö –õ–µ–≥–µ–Ω–¥–∞', image: 'dropcase7_10', rarity: 'epic', value: 274, weight: 2 }
            ],
            8: [ // –ö–µ–π—Å 180 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 18 –¥–æ 270 ÍôÆ
                { name: '–ë–µ—Ä–µ–≥ –†–∞–∫–æ–≤–∏–Ω–∞', image: 'dropcase8_6', rarity: 'common', value: 18, weight: 35 },
                { name: '–ë–µ—Ä–µ–≥ –©–∏—Ç', image: 'dropcase8_2', rarity: 'common', value: 27, weight: 30 },
                { name: '–ë–µ—Ä–µ–≥ –ú–µ—á', image: 'dropcase8_1', rarity: 'common', value: 37, weight: 25 },
                { name: '–ë–µ—Ä–µ–≥ –Ø–∫–æ—Ä—å', image: 'dropcase8_7', rarity: 'common', value: 49, weight: 20 },
                { name: '–ë–µ—Ä–µ–≥ –ñ–µ–º—á—É–∂–∏–Ω–∞', image: 'dropcase8_3', rarity: 'rare', value: 63, weight: 15 },
                { name: '–ë–µ—Ä–µ–≥ –ü—Ä–∏–ª–∏–≤', image: 'dropcase8_9', rarity: 'rare', value: 80, weight: 12 },
                { name: '–ë–µ—Ä–µ–≥ –í–æ–ª–Ω–∞', image: 'dropcase8_8', rarity: 'rare', value: 99, weight: 10 },
                { name: '–ë–µ—Ä–µ–≥ –¢—Ä–µ–∑—É–±–µ—Ü', image: 'dropcase8_4', rarity: 'rare', value: 121, weight: 8 },
                { name: '–ë–µ—Ä–µ–≥ –û–∫–µ–∞–Ω', image: 'dropcase8_10', rarity: 'epic', value: 147, weight: 5 },
                { name: '–ë–µ—Ä–µ–≥ –ö–æ—Ä–∞–ª–ª', image: 'dropcase8_5', rarity: 'epic', value: 177, weight: 2 }
            ],
            9: [ // –ö–µ–π—Å 220 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 22 –¥–æ 330 ÍôÆ
                { name: '–ú–æ–ª–æ—Ç –ë—É—Ä—è', image: 'dropcase9_3', rarity: 'common', value: 22, weight: 35 },
                { name: '–ú–æ–ª–æ—Ç –©–∏—Ç', image: 'dropcase9_2', rarity: 'common', value: 33, weight: 30 },
                { name: '–ú–æ–ª–æ—Ç –£–¥–∞—Ä', image: 'dropcase9_8', rarity: 'common', value: 47, weight: 25 },
                { name: '–ú–æ–ª–æ—Ç –ù–∞–∫–æ–≤–∞–ª—å–Ω—è', image: 'dropcase9_6', rarity: 'common', value: 63, weight: 20 },
                { name: '–ú–æ–ª–æ—Ç –ö—É–≤–∞–ª–¥–∞', image: 'dropcase9_7', rarity: 'rare', value: 82, weight: 15 },
                { name: '–ú–æ–ª–æ—Ç –ì—Ä–æ–º–∞', image: 'dropcase9_1', rarity: 'rare', value: 104, weight: 12 },
                { name: '–ú–æ–ª–æ—Ç –ü–æ—Å–æ—Ö', image: 'dropcase9_4', rarity: 'rare', value: 130, weight: 10 },
                { name: '–ú–æ–ª–æ—Ç –¢–æ—Ä–∞', image: 'dropcase9_10', rarity: 'rare', value: 160, weight: 8 },
                { name: '–ú–æ–ª–æ—Ç –ú—å—ë–ª—å–Ω–∏—Ä', image: 'dropcase9_9', rarity: 'epic', value: 195, weight: 5 },
                { name: '–ú–æ–ª–æ—Ç –ú–æ–ª–Ω–∏—è', image: 'dropcase9_5', rarity: 'epic', value: 236, weight: 2 }
            ],
            10: [ // –ö–µ–π—Å 160 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 16 –¥–æ 240 ÍôÆ
                { name: '–í–∏—Ö—Ä—å –≠–ª–∏–∫—Å–∏—Ä', image: 'dropcase10_3', rarity: 'common', value: 16, weight: 35 },
                { name: '–í–∏—Ö—Ä—å –í–µ—Ç–µ—Ä', image: 'dropcase10_6', rarity: 'common', value: 26, weight: 30 },
                { name: '–í–∏—Ö—Ä—å –©–∏—Ç', image: 'dropcase10_2', rarity: 'common', value: 38, weight: 25 },
                { name: '–í–∏—Ö—Ä—å –ö–ª–∏–Ω–æ–∫', image: 'dropcase10_1', rarity: 'common', value: 53, weight: 20 },
                { name: '–í–∏—Ö—Ä—å –ë—É—Ä—è', image: 'dropcase10_7', rarity: 'rare', value: 71, weight: 15 },
                { name: '–í–∏—Ö—Ä—å –£—Ä–∞–≥–∞–Ω', image: 'dropcase10_8', rarity: 'rare', value: 92, weight: 12 },
                { name: '–í–∏—Ö—Ä—å –õ—É–∫', image: 'dropcase10_4', rarity: 'rare', value: 117, weight: 10 },
                { name: '–í–∏—Ö—Ä—å –¶–∏–∫–ª–æ–Ω', image: 'dropcase10_10', rarity: 'rare', value: 146, weight: 8 },
                { name: '–í–∏—Ö—Ä—å –¢–æ—Ä–Ω–∞–¥–æ', image: 'dropcase10_9', rarity: 'epic', value: 179, weight: 5 },
                { name: '–í–∏—Ö—Ä—å –ü–µ—Ä–æ', image: 'dropcase10_5', rarity: 'epic', value: 218, weight: 2 }
            ],
            11: [ // –ö–µ–π—Å 350 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 35 –¥–æ 525 ÍôÆ
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –ó–µ–ª—å–µ', image: 'dropcase11_3', rarity: 'common', value: 35, weight: 35 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –¢–µ–Ω—å', image: 'dropcase11_6', rarity: 'common', value: 51, weight: 30 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –≠–∫—Ç–æ–ø–ª–∞–∑–º–∞', image: 'dropcase11_8', rarity: 'common', value: 70, weight: 25 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –ë—Ä–æ–Ω—è', image: 'dropcase11_2', rarity: 'common', value: 92, weight: 20 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –ú–µ—á', image: 'dropcase11_1', rarity: 'rare', value: 118, weight: 15 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –î—É—Ö', image: 'dropcase11_7', rarity: 'rare', value: 148, weight: 12 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –õ—É–∫', image: 'dropcase11_4', rarity: 'rare', value: 183, weight: 10 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –ö–æ—Ä–æ–ª—å', image: 'dropcase11_9', rarity: 'rare', value: 223, weight: 8 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –î—É—à–∞', image: 'dropcase11_5', rarity: 'epic', value: 269, weight: 5 },
                { name: '–ü—Ä–∏–∑—Ä–∞–∫ –ë–æ–≥', image: 'dropcase11_10', rarity: 'epic', value: 321, weight: 2 }
            ],
            12: [ // –ö–µ–π—Å 290 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 29 –¥–æ 435 ÍôÆ
                { name: '–õ—ë–¥ –ó–µ–ª—å–µ', image: 'dropcase12_3', rarity: 'common', value: 29, weight: 35 },
                { name: '–õ—ë–¥ –ö—Ä–∏—Å—Ç–∞–ª–ª', image: 'dropcase12_6', rarity: 'common', value: 43, weight: 30 },
                { name: '–õ—ë–¥ –©–∏—Ç', image: 'dropcase12_2', rarity: 'common', value: 59, weight: 25 },
                { name: '–õ—ë–¥ –ò–Ω–µ–π', image: 'dropcase12_7', rarity: 'common', value: 78, weight: 20 },
                { name: '–õ—ë–¥ –ö–ª–∏–Ω–æ–∫', image: 'dropcase12_1', rarity: 'rare', value: 100, weight: 15 },
                { name: '–õ—ë–¥ –ú–æ—Ä–æ–∑', image: 'dropcase12_8', rarity: 'rare', value: 125, weight: 12 },
                { name: '–õ—ë–¥ –ü–æ—Å–æ—Ö', image: 'dropcase12_4', rarity: 'rare', value: 154, weight: 10 },
                { name: '–õ—ë–¥ –ê–π—Å–±–µ—Ä–≥', image: 'dropcase12_9', rarity: 'rare', value: 187, weight: 8 },
                { name: '–õ—ë–¥ –°–Ω–µ–∂–∏–Ω–∫–∞', image: 'dropcase12_5', rarity: 'epic', value: 225, weight: 5 },
                { name: '–õ—ë–¥ –í–µ—á–Ω–æ—Å—Ç—å', image: 'dropcase12_10', rarity: 'epic', value: 268, weight: 2 }
            ],
            13: [ // –ö–µ–π—Å 400 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 40 –¥–æ 600 ÍôÆ
                { name: '–û–≥–æ–Ω—å –≠–ª–∏–∫—Å–∏—Ä', image: 'dropcase13_3', rarity: 'common', value: 40, weight: 35 },
                { name: '–û–≥–æ–Ω—å –ü–ª–∞–º—è', image: 'dropcase13_6', rarity: 'common', value: 57, weight: 30 },
                { name: '–û–≥–æ–Ω—å –ë—Ä–æ–Ω—è', image: 'dropcase13_2', rarity: 'common', value: 77, weight: 25 },
                { name: '–û–≥–æ–Ω—å –ú–µ—á', image: 'dropcase13_1', rarity: 'common', value: 100, weight: 20 },
                { name: '–û–≥–æ–Ω—å –§–µ–Ω–∏–∫—Å', image: 'dropcase13_8', rarity: 'rare', value: 127, weight: 15 },
                { name: '–û–≥–æ–Ω—å –õ–∞–≤–∞', image: 'dropcase13_7', rarity: 'rare', value: 158, weight: 12 },
                { name: '–û–≥–æ–Ω—å –ü–æ—Å–æ—Ö', image: 'dropcase13_4', rarity: 'rare', value: 194, weight: 10 },
                { name: '–û–≥–æ–Ω—å –î—Ä–∞–∫–æ–Ω', image: 'dropcase13_9', rarity: 'rare', value: 235, weight: 8 },
                { name: '–û–≥–æ–Ω—å –°–µ—Ä–¥—Ü–µ', image: 'dropcase13_5', rarity: 'epic', value: 282, weight: 5 },
                { name: '–û–≥–æ–Ω—å –°–æ–ª–Ω—Ü–µ', image: 'dropcase13_10', rarity: 'epic', value: 335, weight: 2 }
            ],
            14: [ // –ö–µ–π—Å 320 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 32 –¥–æ 480 ÍôÆ
                { name: '–¢–µ–Ω—å –ó–µ–ª—å–µ', image: 'dropcase14_3', rarity: 'common', value: 32, weight: 35 },
                { name: '–¢–µ–Ω—å –°—É–º—Ä–∞–∫', image: 'dropcase14_6', rarity: 'common', value: 47, weight: 30 },
                { name: '–¢–µ–Ω—å –ú—Ä–∞–∫', image: 'dropcase14_8', rarity: 'common', value: 65, weight: 25 },
                { name: '–¢–µ–Ω—å –ú–∞–Ω—Ç–∏—è', image: 'dropcase14_2', rarity: 'common', value: 86, weight: 20 },
                { name: '–¢–µ–Ω—å –ö–ª–∏–Ω–æ–∫', image: 'dropcase14_1', rarity: 'rare', value: 110, weight: 15 },
                { name: '–¢–µ–Ω—å –ö–∏–Ω–∂–∞–ª', image: 'dropcase14_4', rarity: 'rare', value: 138, weight: 12 },
                { name: '–¢–µ–Ω—å –ù–æ—á—å', image: 'dropcase14_7', rarity: 'rare', value: 170, weight: 10 },
                { name: '–¢–µ–Ω—å –ë–µ–∑–¥–Ω–∞', image: 'dropcase14_9', rarity: 'rare', value: 207, weight: 8 },
                { name: '–¢–µ–Ω—å –û—Å–∫–æ–ª–æ–∫', image: 'dropcase14_5', rarity: 'epic', value: 249, weight: 5 },
                { name: '–¢–µ–Ω—å –ü—É—Å—Ç–æ—Ç–∞', image: 'dropcase14_10', rarity: 'epic', value: 297, weight: 2 }
            ],
            15: [ // –ö–µ–π—Å 270 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 27 –¥–æ 405 ÍôÆ
                { name: '–°–≤–µ—Ç –í–æ–¥–∞', image: 'dropcase15_3', rarity: 'common', value: 27, weight: 35 },
                { name: '–°–≤–µ—Ç –õ—É—á', image: 'dropcase15_6', rarity: 'common', value: 41, weight: 30 },
                { name: '–°–≤–µ—Ç –î–æ—Å–ø–µ—Ö–∏', image: 'dropcase15_2', rarity: 'common', value: 57, weight: 25 },
                { name: '–°–≤–µ—Ç –ú–µ—á', image: 'dropcase15_1', rarity: 'common', value: 76, weight: 20 },
                { name: '–°–≤–µ—Ç –ê—É—Ä–∞', image: 'dropcase15_8', rarity: 'rare', value: 98, weight: 15 },
                { name: '–°–≤–µ—Ç –°–∏—è–Ω–∏–µ', image: 'dropcase15_7', rarity: 'rare', value: 123, weight: 12 },
                { name: '–°–≤–µ—Ç –ü–æ—Å–æ—Ö', image: 'dropcase15_4', rarity: 'rare', value: 152, weight: 10 },
                { name: '–°–≤–µ—Ç –°–≤—è—Ç–æ—Å—Ç—å', image: 'dropcase15_9', rarity: 'rare', value: 185, weight: 8 },
                { name: '–°–≤–µ—Ç –ë–ª–∞–≥–æ—Å–ª–æ–≤–µ–Ω–∏–µ', image: 'dropcase15_5', rarity: 'epic', value: 222, weight: 5 },
                { name: '–°–≤–µ—Ç –ë–æ–∂–µ—Å—Ç–≤–æ', image: 'dropcase15_10', rarity: 'epic', value: 264, weight: 2 }
            ],
            16: [ // –ö–µ–π—Å 500 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 50 –¥–æ 750 ÍôÆ
                { name: '–•–∞–æ—Å –ó–µ–ª—å–µ', image: 'dropcase16_3', rarity: 'common', value: 50, weight: 35 },
                { name: '–•–∞–æ—Å –†–∞–∑—Ä—É—à–µ–Ω–∏–µ', image: 'dropcase16_6', rarity: 'common', value: 72, weight: 30 },
                { name: '–•–∞–æ—Å –î–æ—Å–ø–µ—Ö', image: 'dropcase16_2', rarity: 'common', value: 97, weight: 25 },
                { name: '–•–∞–æ—Å –ö–ª–∏–Ω–æ–∫', image: 'dropcase16_1', rarity: 'common', value: 125, weight: 20 },
                { name: '–•–∞–æ—Å –ê–Ω–∞—Ä—Ö–∏—è', image: 'dropcase16_7', rarity: 'rare', value: 157, weight: 15 },
                { name: '–•–∞–æ—Å –ë–µ–∑—É–º–∏–µ', image: 'dropcase16_8', rarity: 'rare', value: 193, weight: 12 },
                { name: '–•–∞–æ—Å –ü–æ—Å–æ—Ö', image: 'dropcase16_4', rarity: 'rare', value: 234, weight: 10 },
                { name: '–•–∞–æ—Å –≠–Ω—Ç—Ä–æ–ø–∏—è', image: 'dropcase16_9', rarity: 'rare', value: 280, weight: 8 },
                { name: '–•–∞–æ—Å –°–µ—Ä–¥—Ü–µ', image: 'dropcase16_5', rarity: 'epic', value: 332, weight: 5 },
                { name: '–•–∞–æ—Å –ê–ø–æ–∫–∞–ª–∏–ø—Å–∏—Å', image: 'dropcase16_10', rarity: 'epic', value: 390, weight: 2 }
            ],
            17: [ // –ö–µ–π—Å 450 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 45 –¥–æ 675 ÍôÆ
                { name: '–ü–æ—Ä—è–¥–æ–∫ –≠–ª–∏–∫—Å–∏—Ä', image: 'dropcase17_3', rarity: 'common', value: 45, weight: 35 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –ó–∞–∫–æ–Ω', image: 'dropcase17_6', rarity: 'common', value: 66, weight: 30 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –î–æ—Å–ø–µ—Ö', image: 'dropcase17_2', rarity: 'common', value: 90, weight: 25 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –ú–µ—á', image: 'dropcase17_1', rarity: 'common', value: 117, weight: 20 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å', image: 'dropcase17_7', rarity: 'rare', value: 148, weight: 15 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –ì–∞—Ä–º–æ–Ω–∏—è', image: 'dropcase17_8', rarity: 'rare', value: 182, weight: 12 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –ü–æ—Å–æ—Ö', image: 'dropcase17_4', rarity: 'rare', value: 220, weight: 10 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –ë–∞–ª–∞–Ω—Å', image: 'dropcase17_9', rarity: 'rare', value: 262, weight: 8 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –ü–µ—á–∞—Ç—å', image: 'dropcase17_5', rarity: 'epic', value: 309, weight: 5 },
                { name: '–ü–æ—Ä—è–¥–æ–∫ –ê–±—Å–æ–ª—é—Ç', image: 'dropcase17_10', rarity: 'epic', value: 361, weight: 2 }
            ],
            18: [ // –ö–µ–π—Å 380 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 38 –¥–æ 570 ÍôÆ
                { name: '–í—Ä–µ–º—è –ó–µ–ª—å–µ', image: 'dropcase18_3', rarity: 'common', value: 38, weight: 35 },
                { name: '–í—Ä–µ–º—è –•—Ä–æ–Ω–æ—Å', image: 'dropcase18_6', rarity: 'common', value: 56, weight: 30 },
                { name: '–í—Ä–µ–º—è –î–æ—Å–ø–µ—Ö', image: 'dropcase18_2', rarity: 'common', value: 77, weight: 25 },
                { name: '–í—Ä–µ–º—è –ö–ª–∏–Ω–æ–∫', image: 'dropcase18_1', rarity: 'common', value: 101, weight: 20 },
                { name: '–í—Ä–µ–º—è –ü–µ—Ç–ª—è', image: 'dropcase18_7', rarity: 'rare', value: 128, weight: 15 },
                { name: '–í—Ä–µ–º—è –ü–æ—Ä—Ç–∞–ª', image: 'dropcase18_8', rarity: 'rare', value: 159, weight: 12 },
                { name: '–í—Ä–µ–º—è –ü–æ—Å–æ—Ö', image: 'dropcase18_4', rarity: 'rare', value: 194, weight: 10 },
                { name: '–í—Ä–µ–º—è –ü–∞—Ä–∞–¥–æ–∫—Å', image: 'dropcase18_9', rarity: 'rare', value: 233, weight: 8 },
                { name: '–í—Ä–µ–º—è –ß–∞—Å—ã', image: 'dropcase18_5', rarity: 'epic', value: 277, weight: 5 },
                { name: '–í—Ä–µ–º—è –í–µ—á–Ω–æ—Å—Ç—å', image: 'dropcase18_10', rarity: 'epic', value: 326, weight: 2 }
            ],
            19: [ // –ö–µ–π—Å 600 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 60 –¥–æ 900 ÍôÆ
                { name: '–ö–æ—Å–º–æ—Å –ù–µ–∫—Ç–∞—Ä', image: 'dropcase19_3', rarity: 'common', value: 60, weight: 35 },
                { name: '–ö–æ—Å–º–æ—Å –ó–≤–µ–∑–¥–∞', image: 'dropcase19_6', rarity: 'common', value: 85, weight: 30 },
                { name: '–ö–æ—Å–º–æ—Å –ë—Ä–æ–Ω—è', image: 'dropcase19_2', rarity: 'common', value: 113, weight: 25 },
                { name: '–ö–æ—Å–º–æ—Å –ú–µ—á', image: 'dropcase19_1', rarity: 'common', value: 144, weight: 20 },
                { name: '–ö–æ—Å–º–æ—Å –ì–∞–ª–∞–∫—Ç–∏–∫–∞', image: 'dropcase19_7', rarity: 'rare', value: 179, weight: 15 },
                { name: '–ö–æ—Å–º–æ—Å –ü–æ—Å–æ—Ö', image: 'dropcase19_4', rarity: 'rare', value: 218, weight: 12 },
                { name: '–ö–æ—Å–º–æ—Å –¢—É–º–∞–Ω–Ω–æ—Å—Ç—å', image: 'dropcase19_8', rarity: 'rare', value: 262, weight: 10 },
                { name: '–ö–æ—Å–º–æ—Å –ö–≤–∞–∑–∞—Ä', image: 'dropcase19_9', rarity: 'rare', value: 311, weight: 8 },
                { name: '–ö–æ—Å–º–æ—Å –°–µ—Ä–¥—Ü–µ', image: 'dropcase19_5', rarity: 'epic', value: 366, weight: 5 },
                { name: '–ö–æ—Å–º–æ—Å –í—Å–µ–ª–µ–Ω–Ω–∞—è', image: 'dropcase19_10', rarity: 'epic', value: 427, weight: 2 }
            ],
            20: [ // –ö–µ–π—Å 750 ÍôÆ - –¥—Ä–æ–ø—ã –æ—Ç 75 –¥–æ 1125 ÍôÆ
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –≠–ª–∏–∫—Å–∏—Ä', image: 'dropcase20_3', rarity: 'common', value: 75, weight: 35 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –ë–µ—Å—Å–º–µ—Ä—Ç–∏–µ', image: 'dropcase20_6', rarity: 'common', value: 108, weight: 30 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –î–æ—Å–ø–µ—Ö', image: 'dropcase20_2', rarity: 'common', value: 146, weight: 25 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –ö–ª–∏–Ω–æ–∫', image: 'dropcase20_1', rarity: 'common', value: 189, weight: 20 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –ë–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å', image: 'dropcase20_7', rarity: 'rare', value: 237, weight: 15 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –ê–±—Å–æ–ª—é—Ç', image: 'dropcase20_8', rarity: 'rare', value: 291, weight: 12 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –ü–æ—Å–æ—Ö', image: 'dropcase20_4', rarity: 'rare', value: 351, weight: 10 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –û–º–µ–≥–∞', image: 'dropcase20_9', rarity: 'rare', value: 418, weight: 8 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –î—É—à–∞', image: 'dropcase20_5', rarity: 'epic', value: 492, weight: 5 },
                { name: '–í–µ—á–Ω–æ—Å—Ç—å –ê–ª—å—Ñ–∞', image: 'dropcase20_10', rarity: 'legendary', value: 574, weight: 2 }
            ]
        };

        function updateBalance() {
            document.getElementById('balance').textContent = balance;
            
            // Update case availability
            document.querySelectorAll('.case').forEach(caseEl => {
                const price = parseInt(caseEl.dataset.price);
                if (balance < price) {
                    caseEl.classList.add('disabled');
                } else {
                    caseEl.classList.remove('disabled');
                }
            });
            
            // üö® –ü–†–û–í–ï–†–Ø–ï–ú –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–£–Æ –ë–õ–û–ö–ò–†–û–í–ö–£ –û–¢ –ì–û–°–î–û–õ–ì–ê
            checkAutoDebtBlock();
            
            // üí° –ü–†–û–í–ï–†–Ø–ï–ú –ü–û–õ–ù–´–ô –ù–û–õ–¨ –ò –ü–û–ö–ê–ó–´–í–ê–ï–ú –ü–û–î–°–ö–ê–ó–ö–£
            checkZeroBalance();
            
            // Save data when balance changes
            saveGameData();
        }
        
        // üö® –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ë–õ–û–ö–ò–†–û–í–ö–ê: –µ—Å–ª–∏ –µ—Å—Ç—å –≥–æ—Å–¥–æ–ª–≥, –Ω–æ –Ω–µ–ª—å–∑—è –æ—Ç–∫—Ä—ã—Ç—å –Ω–∏ –æ–¥–Ω–æ–≥–æ –∫–µ–π—Å–∞
        function checkAutoDebtBlock() {
            if (!hasDebt || isBlocked) return; // –ù–µ—Ç –¥–æ–ª–≥–∞ –∏–ª–∏ —É–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –∫–µ–π—Å–∞
            const minCasePrice = Math.min(...Array.from(document.querySelectorAll('.case')).map(el => parseInt(el.dataset.price)));
            
            // –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å –º–µ–Ω—å—à–µ —Å–∞–º–æ–≥–æ –¥–µ—à—ë–≤–æ–≥–æ –∫–µ–π—Å–∞ - –±–ª–æ–∫–∏—Ä—É–µ–º —Å—Ä–∞–∑—É!
            if (balance < minCasePrice) {
                console.log(`üö® –ê–í–¢–û–ë–õ–û–ö–ò–†–û–í–ö–ê: –ë–∞–ª–∞–Ω—Å ${balance} ÍôÆ < –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∫–µ–π—Å–∞ ${minCasePrice} ÍôÆ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –≥–æ—Å–¥–æ–ª–≥–µ!`);
                
                // –°—Ä–∞–∑—É –±–ª–æ–∫–∏—Ä—É–µ–º –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å—ã
                isBlocked = true;
                hasDebt = false;
                debtCasesLeft = 0;
                hasBadCredit = true; // üìâ –ü–û–†–¢–ò–ú –ö–†–ï–î–ò–¢–ù–´–ô –†–ï–ô–¢–ò–ù–ì!
                
                updateDebtStatus();
                showBlockBanner();
                saveGameData();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                showDebtMessage('–ì–æ—Å–¥–æ–ª–≥ –Ω–µ –≤–æ–∑–≤—Ä–∞—â—ë–Ω! –î–µ–Ω–µ–≥ –Ω–µ—Ç –¥–∞–∂–µ –Ω–∞ —Å–∞–º—ã–π –¥–µ—à—ë–≤—ã–π –∫–µ–π—Å! –ë–õ–û–ö–ò–†–û–í–ö–ê!', 'error');
            }
        }

        let selectedInventoryIndex = -1;

        function updateInventory() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            inventoryGrid.innerHTML = '';
            
            // üö´ –ü–†–û–í–ï–†–Ø–ï–ú –ê–†–ï–°–¢ –ò–ù–í–ï–ù–¢–ê–†–Ø
            if (isBlocked) {
                showArrestedInventory();
                return;
            }
            
            inventory.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'inventory-item';
                itemEl.style.cursor = 'pointer';
                
                const iconEl = document.createElement('div');
                iconEl.className = `inventory-item-icon ${item.rarity}`;
                iconEl.style.cssText = `
                    width: 60px;
                    height: 60px;
                    margin: 0 auto 8px;
                    border-radius: 8px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 30px;
                    background-size: cover;
                    background-position: center;
                    background-color: ${getRarityColor(item.rarity)};
                    border: 3px solid ${getRarityColor(item.rarity)};
                `;
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥—Ä–æ–ø–∞ –¥–ª—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
                loadDropImage(iconEl, item.image);
                
                // Add click event to open item menu
                itemEl.addEventListener('click', () => {
                    openItemMenu(index);
                });
                
                itemEl.appendChild(iconEl);
                
                // –°–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –Ω–∞–∑–≤–∞–Ω–∏—è –∏ —Ü–µ–Ω—ã
                const nameEl = document.createElement('div');
                nameEl.textContent = item.name;
                nameEl.style.cssText = 'font-size: 12px; text-align: center; margin-bottom: 4px; word-wrap: break-word; line-height: 1.2; max-width: 100px;';
                itemEl.appendChild(nameEl);
                
                const valueEl = document.createElement('div');
                valueEl.textContent = `${item.value} ÍôÆ`;
                valueEl.style.cssText = 'color: #ffd700; font-size: 11px; text-align: center; font-weight: bold;';
                itemEl.appendChild(valueEl);
                
                inventoryGrid.appendChild(itemEl);
            });
        }
        
        // üö´ –ü–û–ö–ê–ó–´–í–ê–ï–ú –ê–†–ï–°–¢–û–í–ê–ù–ù–´–ô –ò–ù–í–ï–ù–¢–ê–†–¨
        function showArrestedInventory() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            
            const arrestBanner = document.createElement('div');
            arrestBanner.style.cssText = `
                grid-column: 1 / -1;
                background: linear-gradient(135deg, #e74c3c, #c0392b);
                border: 3px solid #fff;
                border-radius: 15px;
                padding: 30px;
                text-align: center;
                animation: arrestPulse 2s ease-in-out infinite;
                margin: 20px 0;
                box-shadow: 0 5px 20px rgba(231, 76, 60, 0.5);
            `;
            
            arrestBanner.innerHTML = `
                <h3 style="color: #fff; font-size: 24px; margin-bottom: 15px; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
                    üö´ –í–ê–®–ï –ò–ú–£–©–ï–°–¢–í–û –ê–†–ï–°–¢–û–í–ê–ù–û! üö´
                </h3>
                <p style="color: #fff; font-size: 16px; margin-bottom: 20px; line-height: 1.4; text-shadow: 1px 1px 2px rgba(0,0,0,0.7);">
                    –ó–∞ –Ω–µ—É–ø–ª–∞—Ç—É –≥–æ—Å–¥–æ–ª–≥–∞ –°–ü–û –∫–æ–Ω—Ñ–∏—Å–∫–æ–≤–∞–ª–æ –≤–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å.<br>
                    <strong style="color: #ffeb3b;">–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –¥–æ –ø–æ–≥–∞—à–µ–Ω–∏—è –¥–æ–ª–≥–æ–≤!</strong>
                </p>
                <div style="
                    background: rgba(255,255,255,0.2);
                    border-radius: 10px;
                    padding: 15px;
                    margin-bottom: 20px;
                    border: 1px solid rgba(255,255,255,0.3);
                ">
                    <p style="color: #fff; font-size: 14px; margin: 0; line-height: 1.3;">
                        üì¶ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤: <strong>${inventory.length}</strong><br>
                        üí∞ –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: <strong>${inventory.reduce((sum, item) => sum + item.value, 0)} ÍôÆ</strong><br>
                        üîí –î–æ—Å—Ç—É–ø –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–∫–∞—è–Ω–∏—è
                    </p>
                </div>
                <div style="
                    background: rgba(0,0,0,0.3);
                    border-radius: 8px;
                    padding: 10px;
                    border: 1px solid rgba(255,255,255,0.2);
                ">
                    <p style="color: #ffd700; font-size: 12px; margin: 0; font-style: italic;">
                        ‚öñÔ∏è "–°–æ–≥–ª–∞—Å–Ω–æ —Å—Ç–∞—Ç—å–µ 228 –£–ö –°–ü–û, –Ω–µ–ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∏ –≥–æ—Å–¥–æ–ª–≥–∞<br>
                        –ø–æ–¥–ª–µ–∂–∞—Ç –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ü–∏–∏ –∏–º—É—â–µ—Å—Ç–≤–∞ –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞."
                    </p>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è –∞—Ä–µ—Å—Ç–∞
            if (!document.getElementById('arrest-pulse-style')) {
                const style = document.createElement('style');
                style.id = 'arrest-pulse-style';
                style.textContent = `
                    @keyframes arrestPulse {
                        0%, 100% { 
                            transform: scale(1);
                            box-shadow: 0 5px 20px rgba(231, 76, 60, 0.5);
                        }
                        50% { 
                            transform: scale(1.02);
                            box-shadow: 0 8px 30px rgba(231, 76, 60, 0.8), 0 0 40px rgba(231, 76, 60, 0.3);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            inventoryGrid.appendChild(arrestBanner);
            
            console.log('üö´ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –∞—Ä–µ—Å—Ç–æ–≤–∞–Ω! –ü–æ–∫–∞–∑–∞–Ω –±–∞–Ω–Ω–µ—Ä –∫–æ–Ω—Ñ–∏—Å–∫–∞—Ü–∏–∏');
        }

        function openItemMenu(index) {
            // üö´ –ë–õ–û–ö–ò–†–£–ï–ú –ú–ï–ù–Æ –ü–†–ï–î–ú–ï–¢–û–í –ü–†–ò –ê–†–ï–°–¢–ï
            if (isBlocked) {
                showArrestMessage();
                return;
            }
            
            if (index >= 0 && index < inventory.length) {
                selectedInventoryIndex = index;
                const item = inventory[index];
                
                const itemMenuModal = document.getElementById('itemMenuModal');
                const itemMenuImage = document.getElementById('itemMenuImage');
                const itemMenuName = document.getElementById('itemMenuName');
                const itemMenuValue = document.getElementById('itemMenuValue');
                
                // Set up item image
                itemMenuImage.style.background = getRarityColor(item.rarity);
                itemMenuImage.innerHTML = '';
                itemMenuImage.style.display = 'flex';
                itemMenuImage.style.alignItems = 'center';
                itemMenuImage.style.justifyContent = 'center';
                
                // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥—Ä–æ–ø–∞
                loadDropImage(itemMenuImage, item.image);
                
                itemMenuName.textContent = item.name;
                itemMenuValue.textContent = `–°—Ç–æ–∏–º–æ—Å—Ç—å: ${item.value} ÍôÆ`;
                
                itemMenuModal.classList.add('active');
            }
        }
        
        // üö´ –ü–û–ö–ê–ó–´–í–ê–ï–ú –°–û–û–ë–©–ï–ù–ò–ï –û –ë–õ–û–ö–ò–†–û–í–ö–ï –ò–ù–í–ï–ù–¢–ê–†–Ø
        function showArrestMessage() {
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #e74c3c, #c0392b);
                border: 3px solid #fff;
                border-radius: 15px;
                padding: 25px;
                z-index: 10006;
                text-align: center;
                max-width: 400px;
                width: 90vw;
                box-shadow: 0 10px 30px rgba(0,0,0,0.8);
                animation: arrestShake 0.5s ease-in-out;
            `;
            
            message.innerHTML = `
                <h3 style="color: #fff; font-size: 22px; margin-bottom: 15px;">üö´ –î–û–°–¢–£–ü –ó–ê–ü–†–ï–©–Å–ù! üö´</h3>
                <p style="color: #fff; font-size: 16px; margin-bottom: 20px; line-height: 1.4;">
                    –í–∞—à–µ –∏–º—É—â–µ—Å—Ç–≤–æ –∞—Ä–µ—Å—Ç–æ–≤–∞–Ω–æ –°–ü–û!<br>
                    <strong style="color: #ffeb3b;">–ü—Ä–µ–¥–º–µ—Ç—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –¥–æ –ø–æ–≥–∞—à–µ–Ω–∏—è –¥–æ–ª–≥–æ–≤!</strong>
                </p>
                <div style="
                    background: rgba(255,255,255,0.2);
                    border-radius: 8px;
                    padding: 12px;
                    margin-bottom: 20px;
                ">
                    <p style="color: #ffd700; font-size: 13px; margin: 0;">
                        üîí –î–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–∫–∞–π—Ç–µ—Å—å –∏ –ø–æ–≥–∞—Å–∏—Ç–µ –¥–æ–ª–≥–∏
                    </p>
                </div>
                <button onclick="this.parentElement.remove()" style="
                    background: #fff;
                    color: #e74c3c;
                    border: none;
                    padding: 12px 25px;
                    border-radius: 10px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    transition: all 0.3s ease;
                " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    üò§ –ü–æ–Ω—è–ª!
                </button>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Ç—Ä—è—Å–∫–∏
            if (!document.getElementById('arrest-shake-style')) {
                const style = document.createElement('style');
                style.id = 'arrest-shake-style';
                style.textContent = `
                    @keyframes arrestShake {
                        0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
                        10% { transform: translate(-50%, -50%) rotate(-1deg); }
                        20% { transform: translate(-50%, -50%) rotate(1deg); }
                        30% { transform: translate(-50%, -50%) rotate(-1deg); }
                        40% { transform: translate(-50%, -50%) rotate(1deg); }
                        50% { transform: translate(-50%, -50%) rotate(-1deg); }
                        60% { transform: translate(-50%, -50%) rotate(1deg); }
                        70% { transform: translate(-50%, -50%) rotate(-1deg); }
                        80% { transform: translate(-50%, -50%) rotate(1deg); }
                        90% { transform: translate(-50%, -50%) rotate(-1deg); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(message);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–±–∏—Ä–∞–µ–º —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (document.body.contains(message)) {
                    document.body.removeChild(message);
                }
            }, 4000);
            
            console.log('üö´ –ü–æ–∫–∞–∑–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è');
        }

        function sellItemFromMenu() {
            if (selectedInventoryIndex >= 0 && selectedInventoryIndex < inventory.length) {
                const item = inventory[selectedInventoryIndex];
                balance += item.value;
                inventory.splice(selectedInventoryIndex, 1);
                updateBalance();
                updateInventory();
                addToWinglist(item);
                saveGameData(); // Save when selling from menu
                closeItemMenu();
                
                // üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ—Å–ª–µ –ø—Ä–æ–¥–∞–∂–∏
                checkZeroBalance();
                
                // üí° –ü–†–û–í–ï–†–Ø–ï–ú –û–¢–õ–û–ñ–ï–ù–ù–£–Æ –ü–û–î–°–ö–ê–ó–ö–£ –ü–û–°–õ–ï –î–ï–ô–°–¢–í–ò–Ø
                checkPendingBonusHint();
            }
        }

        function closeItemMenu() {
            document.getElementById('itemMenuModal').classList.remove('active');
            selectedInventoryIndex = -1;
        }

        function sellInventoryItem(index) {
            if (index >= 0 && index < inventory.length) {
                const item = inventory[index];
                balance += item.value;
                inventory.splice(index, 1);
                updateBalance();
                updateInventory();
                addToWinglist(item);
            }
        }

        function getRarityColor(rarity) {
            switch (rarity) {
                case 'common': return '#95a5a6';
                case 'rare': return '#3498db';
                case 'epic': return '#9b59b6';
                case 'legendary': return '#f39c12';
                default: return '#95a5a6';
            }
        }

        // Error sound for insufficient funds
        function playErrorSound() {
            // –ó–≤—É–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã - —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            console.log('‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞');
        }

        function openCase(caseType, price) {
            // üö´ –ü–†–û–í–ï–†–ö–ê –ë–õ–û–ö–ò–†–û–í–ö–ò –û–¢ –ì–û–°–î–û–õ–ì–ê
            if (isBlocked) {
                showDebtMessage('–ö–µ–π—Å—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã! –ü–æ–≥–∞—Å–∏—Ç–µ –¥–æ–ª–≥ –∏–ª–∏ –ø–æ–∫–∞–π—Ç–µ—Å—å!', 'error');
                return;
            }
            
            // üõ°Ô∏è –ó–ê–©–ò–¢–ê –û–¢ –ö–£–õ–î–ê–£–ù–ê
            const now = Date.now();
            if (caseCooldowns[caseType] && now - caseCooldowns[caseType] < 2000) {
                console.log(`‚è∞ –ö–µ–π—Å ${caseType} –Ω–∞ –∫—É–ª–¥–∞—É–Ω–µ!`);
                const caseElement = document.querySelector(`[data-case="${caseType}"]`);
                if (caseElement) {
                    caseElement.style.opacity = '0.5';
                    setTimeout(() => {
                        caseElement.style.opacity = '1';
                    }, 300);
                }
                return;
            }
            
            if (balance < price) {
                // –¢–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å - NO ROULETTE
                playErrorSound(); // –¢–µ–ø–µ—Ä—å —Ç–æ–ª—å–∫–æ console.log
                const caseElement = document.querySelector(`[data-case="${caseType}"]`);
                if (caseElement) {
                    caseElement.classList.add('shake');
                    setTimeout(() => {
                        caseElement.classList.remove('shake');
                    }, 500);
                }
                // STOP HERE - don't continue to roulette
                return;
            }

            // üõ°Ô∏è –£–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú –ö–£–õ–î–ê–£–ù
            caseCooldowns[caseType] = now;
            console.log(`üîí –ö–µ–π—Å ${caseType} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –Ω–∞ 2 —Å–µ–∫—É–Ω–¥—ã`);

            // Only proceed with roulette if balance is sufficient
            balance -= price;
            updateBalance();
            
            // üèõÔ∏è –ü–†–û–í–ï–†–Ø–ï–ú –ì–û–°–î–û–õ–ì –ü–û–°–õ–ï –û–¢–ö–†–´–¢–ò–Ø –ö–ï–ô–°–ê
            checkDebtOnCaseOpen();
            
            // üõ°Ô∏è –í–ö–õ–Æ–ß–ê–ï–ú –ó–ê–©–ò–¢–£ –†–£–õ–ï–¢–ö–ò
            rouletteProtection = true;
            console.log('üîí –†–£–õ–ï–¢–ö–ê –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–ê! –í—ã—Ö–æ–¥ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –¥—Ä–æ–ø–∞!');
            
            // üö´ –ë–õ–û–ö–ò–†–£–ï–ú ESC –ò –î–†–£–ì–ò–ï –°–ü–û–°–û–ë–´ –ó–ê–ö–†–´–¢–ò–Ø
            blockRouletteEscape();

            const rouletteSection = document.getElementById('rouletteSection');
            const rouletteStrip = document.getElementById('rouletteStrip');
            const rouletteResult = document.getElementById('rouletteResult');
            
            // –û—á–∏—â–∞–µ–º —Ç—Ä–µ–∫ –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            rouletteStrip.innerHTML = '';
            rouletteResult.classList.remove('show');
            currentItem = null;
            
            rouletteSection.classList.add('active');

            // –ó–≤—É–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã

            // Generate roulette items with weighted probability
            const availableItems = items[caseType];
            const rouletteItems = [];
            
            // Create weighted selection function
            function getWeightedRandomItem(items) {
                const totalWeight = items.reduce((sum, item) => sum + item.weight, 0);
                let random = Math.random() * totalWeight;
                
                for (let item of items) {
                    random -= item.weight;
                    if (random <= 0) {
                        return item;
                    }
                }
                return items[0]; // fallback
            }
            
            // –°–æ–∑–¥–∞–µ–º —Ä–æ–≤–Ω–æ 30 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ä—É–ª–µ—Ç–∫–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
            for (let i = 0; i < 30; i++) {
                const randomItem = getWeightedRandomItem(availableItems);
                rouletteItems.push(randomItem);
            }

            // Create roulette items
            rouletteItems.forEach((item, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = `roulette-item ${item.rarity}`;
                itemEl.dataset.index = index;
                itemEl.dataset.originalIndex = index; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å
                itemEl.style.transition = 'all 0.2s'; // –î–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
                
                const imageDiv = document.createElement('div');
                imageDiv.style.cssText = `
                    font-size: 32px; 
                    margin-bottom: 8px; 
                    width: 80px; 
                    height: 80px; 
                    background-size: cover; 
                    background-position: center; 
                    margin: 0 auto 8px; 
                    display: flex; 
                    align-items: center; 
                    justify-content: center;
                    border-radius: 8px;
                    border: 2px solid rgba(255,255,255,0.3);
                `;
                
                // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥—Ä–æ–ø–∞
                loadDropImage(imageDiv, item.image);
                
                itemEl.appendChild(imageDiv);
                
                const nameDiv = document.createElement('div');
                nameDiv.style.cssText = 'font-size: 11px; text-align: center; margin-bottom: 4px; line-height: 1.2; max-width: 130px; word-wrap: break-word;';
                nameDiv.textContent = item.name;
                itemEl.appendChild(nameDiv);
                
                const valueDiv = document.createElement('div');
                valueDiv.style.cssText = 'font-size: 10px; color: #ffd700; font-weight: bold; text-align: center;';
                valueDiv.textContent = `${item.value} ÍôÆ`;
                itemEl.appendChild(valueDiv);
                
                rouletteStrip.appendChild(itemEl);
            });

            // –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è —Ä—É–ª–µ—Ç–∫–∏
            setTimeout(() => {
                // –°–ª—É—á–∞–π–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (–æ—Ç 12 –¥–æ 18) - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å –ø–æ–¥ —Å—Ç—Ä–µ–ª–∫–æ–π
                const stopIndex = Math.floor(Math.random() * 6) + 12;
                const itemWidth = 150; // –®–∏—Ä–∏–Ω–∞ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
                const containerWidth = document.querySelector('.roulette-container').offsetWidth;
                const centerPosition = containerWidth / 2; // –¶–µ–Ω—Ç—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
                
                // –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô —Ä–∞—Å—á–µ—Ç: —Ç–æ—á–Ω–æ –ø–æ–¥ —Å—Ç—Ä–µ–ª–∫–æ–π
                const offset = -(stopIndex * itemWidth) + centerPosition - (itemWidth / 2);
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
                rouletteStrip.style.transition = 'none';
                rouletteStrip.style.transform = 'translateX(0)';
                void rouletteStrip.offsetWidth; // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π reflow
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –∫—Ä–∏–≤–æ–π –∑–∞–º–µ–¥–ª–µ–Ω–∏—è
                rouletteStrip.style.transition = 'transform 5s cubic-bezier(0.2, 0.8, 0.2, 1)';
                rouletteStrip.style.transform = `translateX(${offset}px)`;
                
                const actualWinningItem = rouletteItems[stopIndex % rouletteItems.length];
                console.log(`üé∞ –†—É–ª–µ—Ç–∫–∞: –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–µ ${stopIndex} - ${actualWinningItem.name}`);
                
                // –í—ã–¥–µ–ª—è–µ–º –≤—ã–∏–≥—Ä—ã—à–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤–æ –≤—Ä–µ–º—è –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    const winningElement = rouletteStrip.children[stopIndex];
                    if (winningElement) {
                        winningElement.style.transform = 'scale(1.1)';
                        winningElement.style.filter = 'brightness(1.3)';
                        winningElement.style.boxShadow = '0 0 20px rgba(255, 215, 0, 0.8)';
                    }
                }, 4500); // –í—ã–¥–µ–ª—è–µ–º –∑–∞ 0.5 —Å–µ–∫ –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
                
                // –ü–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                setTimeout(() => {
                    const winningItem = rouletteItems[stopIndex % rouletteItems.length];
                    
                    // üéµ –ü–†–û–ò–ì–†–´–í–ê–ï–ú –ó–í–£–ö –í –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –û–¢ –†–ï–î–ö–û–°–¢–ò –ò –¶–ï–ù–ù–û–°–¢–ò
                    playDropSoundByRarity(winningItem);
                    
                    showResult(winningItem);
                    
                    // üõ°Ô∏è –û–¢–ö–õ–Æ–ß–ê–ï–ú –ó–ê–©–ò–¢–£ –ü–û–°–õ–ï –ü–û–ö–ê–ó–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê
                    rouletteProtection = false;
                    unblockRouletteEscape();
                    console.log('üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∑–∞–Ω - –∑–∞—â–∏—Ç–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, –º–æ–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ');
                }, 5200); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ 5.2 —Å–µ–∫—É–Ω–¥—ã
            }, 300);
        }

        function showResult(item) {
            currentItem = item;
            
            const rouletteResult = document.getElementById('rouletteResult');
            const resultItemImage = document.getElementById('resultItemImage');
            const resultItemName = document.getElementById('resultItemName');
            const resultItemValue = document.getElementById('resultItemValue');
            
            resultItemImage.style.background = getRarityColor(item.rarity);
            resultItemImage.innerHTML = '';
            
            // –ü—Ä–æ—Å—Ç–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥—Ä–æ–ø–∞
            loadDropImage(resultItemImage, item.image);
            
            resultItemName.textContent = item.name;
            resultItemValue.textContent = `–°—Ç–æ–∏–º–æ—Å—Ç—å: ${item.value} ÍôÆ`;
            
            // Show result with animation
            rouletteResult.classList.add('show');
            
            // Animate item image (scale up effect)
            setTimeout(() => {
                resultItemImage.classList.add('animate');
            }, 100);
        }

        function keepItem() {
            if (currentItem) {
                inventory.push(currentItem);
                updateInventory();
                saveGameData(); // Save when keeping item
                hideResult();
                
                // üí° –ü–†–û–í–ï–†–Ø–ï–ú –û–¢–õ–û–ñ–ï–ù–ù–£–Æ –ü–û–î–°–ö–ê–ó–ö–£ –ü–û–°–õ–ï –î–ï–ô–°–¢–í–ò–Ø
                checkPendingBonusHint();
            }
        }

        function sellItem() {
            if (currentItem) {
                balance += currentItem.value;
                updateBalance();
                addToWinglist(currentItem);
                saveGameData(); // Save when selling item
                hideResult();
                
                // üí° –ü–†–û–í–ï–†–Ø–ï–ú –û–¢–õ–û–ñ–ï–ù–ù–£–Æ –ü–û–î–°–ö–ê–ó–ö–£ –ü–û–°–õ–ï –î–ï–ô–°–¢–í–ò–Ø
                checkPendingBonusHint();
            }
        }

        function hideResult() {
            document.getElementById('rouletteResult').classList.remove('show');
            document.getElementById('rouletteSection').classList.remove('active');
            document.getElementById('resultItemImage').classList.remove('animate');
            
            // üõ°Ô∏è –û–¢–ö–õ–Æ–ß–ê–ï–ú –ó–ê–©–ò–¢–£ –†–£–õ–ï–¢–ö–ò
            rouletteProtection = false;
            unblockRouletteEscape();
            console.log('üîì –ó–∞—â–∏—Ç–∞ —Ä—É–ª–µ—Ç–∫–∏ –û–¢–ö–õ–Æ–ß–ï–ù–ê - –º–æ–∂–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∫–ª–∏–∫–∞—Ç—å –ø–æ —Å–∞–π—Ç—É');
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∑–≤—É–∫–∏
            if (rollSound && !rollSound.paused) {
                rollSound.pause();
                rollSound.currentTime = 0;
            }
            if (dropSound && !dropSound.paused) {
                dropSound.pause();
                dropSound.currentTime = 0;
            }
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ä—É–ª–µ—Ç–∫—É –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            const rouletteStrip = document.getElementById('rouletteStrip');
            rouletteStrip.style.transition = 'none';
            rouletteStrip.style.transform = 'translateX(0)';
            
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const highlightedItems = rouletteStrip.querySelectorAll('.roulette-item[style*="scale"]');
            highlightedItems.forEach(item => {
                item.style.transform = '';
                item.style.filter = '';
                item.style.boxShadow = '';
            });
            
            currentItem = null;
            
            // üí° –ü–†–û–í–ï–†–Ø–ï–ú –û–¢–õ–û–ñ–ï–ù–ù–£–Æ –ü–û–î–°–ö–ê–ó–ö–£ –ü–û–°–õ–ï –ó–ê–ö–†–´–¢–ò–Ø –†–£–õ–ï–¢–ö–ò
            checkPendingBonusHint();
        }

        // üõ°Ô∏è –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–ù–û–ï –ó–ê–ö–†–´–¢–ò–ï –†–£–õ–ï–¢–ö–ò
        document.getElementById('rouletteSection').addEventListener('click', function(e) {
            // –ù–ò–ö–ê–ö–ò–• –ó–ê–ö–†–´–¢–ò–ô –î–û –ü–û–õ–£–ß–ï–ù–ò–Ø –î–†–û–ü–ê!
            if (e.target === this) {
                if (rouletteProtection && currentItem === null) {
                    // –†—É–ª–µ—Ç–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ - –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º!
                    console.log('üîí –†—É–ª–µ—Ç–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ñ–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞!');
                    return false; // –ë–ª–æ–∫–∏—Ä—É–µ–º –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                } else if (currentItem !== null) {
                    // –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Ç–æ–ª—å–∫–æ –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è –¥—Ä–æ–ø–∞
                    hideResult();
                }
            }
        });

        // Close item menu on background click
        document.getElementById('itemMenuModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeItemMenu();
            }
        });

        // Avatar functions
        function handleAvatarClick() {
            // –ö–ª–∏–∫ –Ω–∞ –∞–≤–∞—Ç–∞—Ä —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è
            openProfileMenu();
        }

        function openAvatarUpload() {
            const input = document.getElementById('avatarUploadInput');
            input.click();
        }

        function handleAvatarUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (5 –ú–ë –º–∞–∫—Å–∏–º—É–º)
            if (file.size > 5 * 1024 * 1024) {
                alert('–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5 –ú–ë');
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
            if (!file.type.startsWith('image/')) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const avatarData = e.target.result;
                
                // –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–≤—å—é –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                const preview = document.createElement('div');
                preview.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100vw;
                    height: 100vh;
                    background: rgba(0,0,0,0.8);
                    z-index: 10003;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    flex-direction: column;
                `;
                
                preview.innerHTML = `
                    <div style="background: #2c3e50; padding: 30px; border-radius: 20px; text-align: center; border: 3px solid #e74c3c;">
                        <h3 style="color: #ffd700; margin-bottom: 20px;">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∞–≤–∞—Ç–∞—Ä–∞</h3>
                        <div style="
                            width: 120px; 
                            height: 120px; 
                            border-radius: 50%; 
                            background-image: url('${avatarData}');
                            background-size: cover;
                            background-position: center;
                            margin: 0 auto 20px;
                            border: 3px solid #ffd700;
                        "></div>
                        <div style="display: flex; gap: 15px; justify-content: center;">
                            <button id="confirmAvatar" style="
                                background: #27ae60; color: white; border: none; padding: 12px 25px; 
                                border-radius: 10px; cursor: pointer; font-size: 16px;
                            ">‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                            <button id="cancelAvatar" style="
                                background: #e74c3c; color: white; border: none; padding: 12px 25px; 
                                border-radius: 10px; cursor: pointer; font-size: 16px;
                            ">‚ùå –û—Ç–º–µ–Ω–∞</button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(preview);
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
                document.getElementById('confirmAvatar').onclick = () => {
                    setUserAvatar(avatarData);
                    document.body.removeChild(preview);
                };
                
                document.getElementById('cancelAvatar').onclick = () => {
                    document.body.removeChild(preview);
                };
            };
            
            reader.readAsDataURL(file);
            
            // –û—á–∏—â–∞–µ–º input –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≥–æ –∂–µ —Ñ–∞–π–ª–∞
            event.target.value = '';
        }

        function setUserAvatar(avatarData) {
            userAvatar = avatarData;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –∞–≤–∞—Ç–∞—Ä—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            const profileAvatar = document.getElementById('profileAvatar');
            profileAvatar.style.backgroundImage = `url('${avatarData}')`;
            profileAvatar.style.backgroundSize = 'cover';
            profileAvatar.style.backgroundPosition = 'center';
            profileAvatar.textContent = '';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            saveGameData();
            
            console.log('‚úÖ –ê–≤–∞—Ç–∞—Ä —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!');
        }

        // Profile menu functions
        function openProfileMenu() {
            const profileMenuModal = document.getElementById('profileMenuModal');
            const profileMenuAvatar = document.getElementById('profileMenuAvatar');
            const nicknameInput = document.getElementById('nicknameInput');
            const promocodeInput = document.getElementById('promocodeInput');
            const promocodeMessage = document.getElementById('promocodeMessage');
            
            // Update avatar preview
            if (userAvatar) {
                profileMenuAvatar.style.backgroundImage = `url('${userAvatar}')`;
                profileMenuAvatar.style.backgroundSize = 'cover';
                profileMenuAvatar.style.backgroundPosition = 'center';
                profileMenuAvatar.textContent = '';
            } else {
                profileMenuAvatar.style.backgroundImage = 'none';
                profileMenuAvatar.textContent = 'üë§';
            }
            
            // Load current nickname
            nicknameInput.value = userNickname;
            
            // Clear promocode input and message
            promocodeInput.value = '';
            promocodeMessage.style.display = 'none';
            
            profileMenuModal.classList.add('active');
        }

        function closeProfileMenu() {
            document.getElementById('profileMenuModal').classList.remove('active');
        }

        function saveProfile() {
            const nicknameInput = document.getElementById('nicknameInput');
            const newNickname = nicknameInput.value.trim();
            
            if (newNickname.length > 0) {
                userNickname = newNickname;
                saveGameData(); // Save to localStorage
                closeProfileMenu();
            } else {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–∏–∫–Ω–µ–π–º!');
            }
        }

        // Close profile menu on background click
        document.getElementById('profileMenuModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeProfileMenu();
            }
        });

        // Functions for no drops modal
        function showNoDropsMessage() {
            document.getElementById('noDropsModal').classList.add('active');
        }

        function closeNoDropsModal() {
            document.getElementById('noDropsModal').classList.remove('active');
        }

        // Close no drops modal on background click
        document.getElementById('noDropsModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeNoDropsModal();
            }
        });

        // Balance editing functionality
        function handleBalanceClick(event) {
            // Prevent text selection
            event.preventDefault();
            event.stopPropagation();
            
            balanceClickCount++;
            
            // Clear existing timer
            if (balanceClickTimer) {
                clearTimeout(balanceClickTimer);
            }
            
            // Set timer to reset click count
            balanceClickTimer = setTimeout(() => {
                balanceClickCount = 0;
            }, 800); // Increased timeout for easier triple clicking
            
            // Check for triple click
            if (balanceClickCount === 3) {
                // Triple click detected - enable balance editing
                enableBalanceEditing();
                balanceClickCount = 0;
                clearTimeout(balanceClickTimer);
            } else if (balanceClickCount === 1) {
                // Visual feedback for first click
                const balanceEl = document.getElementById('balance');
                balanceEl.style.backgroundColor = 'rgba(255, 215, 0, 0.2)';
                setTimeout(() => {
                    balanceEl.style.backgroundColor = '';
                }, 200);
            }
        }

        function enableBalanceEditing() {
            const balanceEl = document.getElementById('balance');
            const currentBalance = balance;
            
            // Create input field
            const input = document.createElement('input');
            input.type = 'number';
            input.value = currentBalance;
            input.style.cssText = `
                background: #2c3e50;
                color: #ffd700;
                border: 2px solid #e74c3c;
                border-radius: 5px;
                padding: 2px 5px;
                font-size: 18px;
                font-weight: bold;
                width: 100px;
                text-align: center;
            `;
            
            // Replace balance text with input
            balanceEl.innerHTML = '';
            balanceEl.appendChild(input);
            input.focus();
            input.select();
            
            // Handle input completion
            function finishEditing() {
                const newBalance = parseInt(input.value) || 0;
                if (newBalance >= 0) {
                    balance = Math.max(0, newBalance); // Prevent negative balance
                    updateBalance();
                    console.log(`üí∞ –ë–∞–ª–∞–Ω—Å –∏–∑–º–µ–Ω—ë–Ω –Ω–∞: ${balance} ÍôÆ`);
                } else {
                    // Restore original balance if invalid input
                    balanceEl.textContent = currentBalance;
                }
            }
            
            // Listen for Enter key or blur
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    finishEditing();
                }
                if (e.key === 'Escape') {
                    balanceEl.textContent = currentBalance;
                }
            });
            
            input.addEventListener('blur', finishEditing);
            
            // Timeout fallback (auto-save after 5 seconds)
            setTimeout(() => {
                if (document.contains(input)) {
                    finishEditing();
                }
            }, 5000);
        }

        // Promocode system
        let usedPromocodes = [];
        let promocodeClickCount = 0;
        let promocodeClickTimer = null;
        
        function activatePromocode() {
            const promocodeInput = document.getElementById('promocodeInput');
            const promocodeMessage = document.getElementById('promocodeMessage');
            const promocode = promocodeInput.value.trim().toUpperCase();
            
            if (!promocode) {
                showPromocodeMessage('–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥!', 'error');
                return;
            }
            
            // Check if promocode was already used
            if (usedPromocodes.includes(promocode)) {
                showPromocodeMessage('–ü—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –±—ã–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω!', 'error');
                return;
            }
            
            // Available promocodes
            const promocodes = {
                'GLISTOK': {
                    bonus: 500,
                    description: '+500 ÍôÆ –Ω–∞ –±–∞–ª–∞–Ω—Å'
                },
                'MEOFEN': {
                    bonus: 300,
                    description: '+300 ÍôÆ –Ω–∞ –±–∞–ª–∞–Ω—Å'
                },
                'IVA STUDIO': {
                    bonus: 1000,
                    description: '+1000 ÍôÆ –Ω–∞ –±–∞–ª–∞–Ω—Å'
                },
                'BONUS': {
                    bonus: 200,
                    description: '+200 ÍôÆ –Ω–∞ –±–∞–ª–∞–Ω—Å'
                },
                'START': {
                    bonus: 100,
                    description: '+100 ÍôÆ –Ω–∞ –±–∞–ª–∞–Ω—Å'
                },
                'GLIST': {
                    bonus: 0,
                    description: '–û—Å–æ–±—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ - –°–ö–†–ò–ú–ï–†',
                    special: 'jumpscare'
                }
            };
            
            console.log(`üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–º–æ–∫–æ–¥: "${promocode}"`);
            console.log('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã:', Object.keys(promocodes));
            console.log('üö´ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã:', usedPromocodes);
            
            if (promocodes[promocode]) {
                const promoData = promocodes[promocode];
                console.log(`‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–∞–π–¥–µ–Ω: ${promocode}`, promoData);
                
                // Special handling for GLIST promocode
                if (promoData.special === 'jumpscare') {
                    console.log('üëª GLIST –ø—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω - –∑–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–º–µ—Ä!');
                    
                    // –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    showPromocodeMessage('üòà GLIST –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! –ì–û–¢–û–í–¨–°–Ø...', 'success');
                    promocodeInput.value = '';
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ
                    usedPromocodes.push(promocode);
                    saveGameData();
                    
                    // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
                    setTimeout(() => {
                        closeProfileMenu();
                        
                        // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
                        setTimeout(() => {
                            executeJumpscare();
                        }, 500);
                    }, 1000);
                    
                    return;
                }
                
                // Regular promocode handling
                balance += promoData.bonus;
                showPromocodeMessage(`‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! ${promoData.description}`, 'success');
                
                usedPromocodes.push(promocode);
                updateBalance(); // –≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä–æ–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É BONUS –µ—Å–ª–∏ –±–∞–ª–∞–Ω—Å > 0
                saveGameData();
                promocodeInput.value = '';
                
                console.log(`üéÅ –ü—Ä–æ–º–æ–∫–æ–¥ "${promocode}" –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω: +${promoData.bonus} ÍôÆ`);
            } else {
                console.log(`‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ "${promocode}" –Ω–µ –Ω–∞–π–¥–µ–Ω!`);
                showPromocodeMessage('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥!', 'error');
            }
        }
        
        function showPromocodeMessage(message, type) {
            const promocodeMessage = document.getElementById('promocodeMessage');
            promocodeMessage.textContent = message;
            promocodeMessage.style.display = 'block';
            
            if (type === 'success') {
                promocodeMessage.style.color = '#27ae60';
            } else if (type === 'error') {
                promocodeMessage.style.color = '#e74c3c';
            }
            
            // Hide message after 3 seconds
            setTimeout(() => {
                promocodeMessage.style.display = 'none';
            }, 3000);
        }
        
        // Handle Enter key in promocode input
        function handlePromocodeKeydown(event) {
            if (event.key === 'Enter') {
                activatePromocode();
            }
        }
        
        // Cheat function: Triple click on promocode input to reset EVERYTHING
        function handlePromocodeInputClick(event) {
            promocodeClickCount++;
            
            // Clear existing timer
            if (promocodeClickTimer) {
                clearTimeout(promocodeClickTimer);
            }
            
            // Set timer to reset click count
            promocodeClickTimer = setTimeout(() => {
                promocodeClickCount = 0;
            }, 800);
            
            // Check for triple click
            if (promocodeClickCount === 3) {
                resetEverything();
                promocodeClickCount = 0;
                clearTimeout(promocodeClickTimer);
            }
        }
        
        // ULTIMATE CHEAT: Reset EVERYTHING including credit history
        function resetEverything() {
            // –°–±—Ä–æ—Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
            usedPromocodes = [];
            
            // –°–ë–†–û–° –ö–†–ï–î–ò–¢–ù–û–ô –ò–°–¢–û–†–ò–ò - –ì–õ–ê–í–ù–û–ï!
            hasBadCredit = false;
            
            // –°–ë–†–û–° –ü–û–î–°–ö–ê–ó–ö–ò BONUS
            bonusHintShown = false;
            pendingBonusHint = false;
            pendingBonusHint = false;
            pendingBonusHint = false;
            
            // –£–±–∏—Ä–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
            isBlocked = false;
            hasDebt = false;
            debtCasesLeft = 0;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
            updateDebtStatus();
            if (isBlocked) {
                hideBlockBanner();
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
            saveGameData();
            
            const promocodeMessage = document.getElementById('promocodeMessage');
            promocodeMessage.innerHTML = `
                <div style="color: #27ae60; font-weight: bold;">üîÑ –í–°–Å –°–ë–†–û–®–ï–ù–û!</div>
                <div style="color: #ffd700; font-size: 10px; margin-top: 2px;">
                    ‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥—ã —Å–±—Ä–æ—à–µ–Ω—ã<br>
                    ‚úÖ –ö—Ä–µ–¥–∏—Ç–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –æ—á–∏—â–µ–Ω–∞<br>
                    ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ BONUS —Å–±—Ä–æ—à–µ–Ω–∞<br>
                    ‚úÖ –ì–æ—Å–¥–æ–ª–≥ —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
                </div>
            `;
            promocodeMessage.style.display = 'block';
            promocodeMessage.style.fontSize = '11px';
            
            // Hide message after 5 seconds
            setTimeout(() => {
                promocodeMessage.style.display = 'none';
            }, 5000);
            
            console.log('üî• ULTIMATE CHEAT: –ü—Ä–æ–º–æ–∫–æ–¥—ã + –∫—Ä–µ–¥–∏—Ç–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è + –ø–æ–¥—Å–∫–∞–∑–∫–∞ BONUS –ü–û–õ–ù–û–°–¢–¨–Æ —Å–±—Ä–æ—à–µ–Ω—ã!');
            console.log('üí∞ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –±—Ä–∞—Ç—å –≥–æ—Å–¥–æ–ª–≥ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã!');
        }
        
        // üí° –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ö–ù–û–ü–ö–ò
        window.closeBonusModal = function() {
            const modal = document.getElementById('bonus-modal');
            if (modal) {
                document.body.removeChild(modal);
                bonusHintShown = true; // –ü–æ–º–µ—á–∞–µ–º —á—Ç–æ –ø–æ–∫–∞–∑–∞–ª–∏
                saveGameData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥
                console.log('üí° –ú–µ–Ω—é—à–∫–∞ BONUS –∑–∞–∫—Ä—ã—Ç–∞, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º');
            }
        };

        // –°–ö–†–ò–ú–ï–† –° –í–ò–î–ï–û –ò –†–ï–ó–ï–†–í–ù–´–ú –¢–ï–ö–°–¢–û–ú
        function executeJumpscare() {
            console.log('üòà GLIST –°–ö–†–ò–ú–ï–† –ó–ê–ü–£–©–ï–ù! üëª');
            
            // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–∫—Ä–∏–º–µ—Ä–∞
            const screamer = document.createElement('div');
            screamer.id = 'glist-screamer';
            screamer.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: transparent;
                z-index: 999999;
                display: flex;
                justify-content: center;
                align-items: center;
            `;
            
            // –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç —Å —Ç—Ä—è—Å–∫–æ–π
            const textScreamer = document.createElement('div');
            textScreamer.id = 'text-screamer';
            textScreamer.style.cssText = `
                color: red;
                font-size: 15vw;
                font-weight: bold;
                text-align: center;
                font-family: Arial;
                animation: glistShake 0.1s infinite;
                text-shadow: 0 0 50px #ff0000, 0 0 100px #ff0000, 0 0 150px #ff0000;
            `;
            textScreamer.innerHTML = `
                üëª GLIST! üëª<br>
                <div style="font-size: 8vw; color: yellow; margin-top: 20px; text-shadow: 0 0 30px #ffff00, 0 0 60px #ffff00;">
                    –ò–°–ü–£–ì–ê–õ–°–Ø?! üòà
                </div>
            `;
            
            screamer.appendChild(textScreamer);
            
            // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é
            if (!document.getElementById('glist-shake-style')) {
                const style = document.createElement('style');
                style.id = 'glist-shake-style';
                style.textContent = `
                    @keyframes glistShake {
                        0% { transform: translate(0, 0) rotate(0deg); }
                        10% { transform: translate(-5px, -5px) rotate(-1deg); }
                        20% { transform: translate(5px, -5px) rotate(1deg); }
                        30% { transform: translate(-5px, 5px) rotate(0deg); }
                        40% { transform: translate(5px, 5px) rotate(1deg); }
                        50% { transform: translate(-5px, -5px) rotate(-1deg); }
                        60% { transform: translate(5px, -5px) rotate(0deg); }
                        70% { transform: translate(-5px, 5px) rotate(-1deg); }
                        80% { transform: translate(5px, 5px) rotate(1deg); }
                        90% { transform: translate(-5px, -5px) rotate(0deg); }
                        100% { transform: translate(0, 0) rotate(0deg); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–∫—Ä–∏–º–µ—Ä –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
            document.body.appendChild(screamer);
            
            // –ó–≤—É–∫
            playScreamerSound();
            
            // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –≤–∏–¥–µ–æ —ç–ª–µ–º–µ–Ω—Ç–∞
            let videoElement = null;
            
            // –ü–†–û–°–¢–ê–Ø –ó–ê–ì–†–£–ó–ö–ê –í–ò–î–ï–û
            setTimeout(() => {
                console.log('üé¨ –ü—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å glist.mov...');
                
                videoElement = document.createElement('video');
                videoElement.src = 'glist.mov';
                videoElement.autoplay = true;
                videoElement.muted = false;
                videoElement.volume = 0.8;
                videoElement.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    z-index: 1000000;
                    background: black;
                `;
                
                // –ï—Å–ª–∏ –≤–∏–¥–µ–æ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
                videoElement.oncanplay = () => {
                    console.log('‚úÖ –í–∏–¥–µ–æ glist.mov –∑–∞–≥—Ä—É–∂–µ–Ω–æ! –ü–æ–∫–∞–∑—ã–≤–∞–µ–º.');
                    screamer.innerHTML = '';
                    screamer.appendChild(videoElement);
                    videoElement.play().catch(e => console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:', e));
                };
                
                // –ï—Å–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å - –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç
                videoElement.onerror = () => {
                    console.log('‚ùå –í–∏–¥–µ–æ glist.mov –Ω–µ –Ω–∞–π–¥–µ–Ω–æ - –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç');
                };
                
            }, 500);
            
            // –£–¥–∞–ª—è–µ–º —Å–∫—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (document.getElementById('glist-screamer')) {
                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∏–¥–µ–æ –µ—Å–ª–∏ –∏–≥—Ä–∞–µ—Ç
                    if (videoElement && !videoElement.paused) {
                        videoElement.pause();
                        videoElement.currentTime = 0;
                    }
                    document.body.removeChild(screamer);
                    console.log('üîö –°–∫—Ä–∏–º–µ—Ä –∑–∞–≤–µ—Ä—à—ë–Ω');
                }
            }, 10000);
        }



        // Screamer sound function
        function playScreamerSound() {
            // Try to play custom scream sound first
            const customScream = new Audio();
            customScream.volume = 0.7; // Loud but safe volume
            
            customScream.onloadeddata = () => {
                customScream.play().catch(() => {
                    // If custom sound fails, use generated scream
                    playGeneratedScream();
                });
            };
            
            customScream.onerror = () => {
                // If custom sound doesn't exist, use generated scream
                playGeneratedScream();
            };
            
            customScream.src = 'scream.mp3'; // User should add this file
        }

        // üîí –ë–õ–û–ö–ò–†–û–í–ö–ê –í–°–ï–• –°–ü–û–°–û–ë–û–í –ó–ê–ö–†–´–¢–¨ –†–£–õ–ï–¢–ö–£
        let escapeBlocker = null;
        
        function blockRouletteEscape() {
            // –ë–ª–æ–∫–∏—Ä—É–µ–º ESC –∏ –¥—Ä—É–≥–∏–µ –∫–ª–∞–≤–∏—à–∏
            escapeBlocker = function(e) {
                if (rouletteProtection && currentItem === null) {
                    // –ë–ª–æ–∫–∏—Ä—É–µ–º ESC, Enter, Space, –∏ –¥—Ä—É–≥–∏–µ –∫–ª–∞–≤–∏—à–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
                    if (e.key === 'Escape' || e.key === 'Enter' || e.key === ' ' || e.key === 'Backspace') {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('üö´ –ö–ª–∞–≤–∏—à–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ñ–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä—É–ª–µ—Ç–∫–∏!');
                        showBlockedMessage();
                        return false;
                    }
                }
            };
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å –∫–ª–∞–≤–∏—à
            document.addEventListener('keydown', escapeBlocker, true);
            document.addEventListener('keyup', escapeBlocker, true);
            
            console.log('üîí –í—Å–µ —Å–ø–æ—Å–æ–±—ã –≤—ã—Ö–æ–¥–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã!');
        }
        
        function unblockRouletteEscape() {
            // –£–±–∏—Ä–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–ª–∞–≤–∏—à
            if (escapeBlocker) {
                document.removeEventListener('keydown', escapeBlocker, true);
                document.removeEventListener('keyup', escapeBlocker, true);
                escapeBlocker = null;
            }
            
            console.log('üîì –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–Ω—è—Ç–∞, –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å —Ä—É–ª–µ—Ç–∫—É');
        }
        
        function showBlockedMessage() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ—Ä–æ—Ç–∫–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
            const existingMessage = document.getElementById('roulette-blocked-message');
            if (existingMessage) return; // –£–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ
            
            const message = document.createElement('div');
            message.id = 'roulette-blocked-message';
            message.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(231, 76, 60, 0.9);
                color: white;
                padding: 10px 20px;
                border-radius: 10px;
                font-weight: bold;
                z-index: 10005;
                animation: blockPulse 0.5s ease-in-out;
                border: 2px solid #fff;
            `;
            
            message.textContent = 'üîí –†—É–ª–µ—Ç–∫–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞! –ñ–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞!';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—É–ª—å—Å–∞—Ü–∏–∏
            if (!document.getElementById('block-pulse-style')) {
                const style = document.createElement('style');
                style.id = 'block-pulse-style';
                style.textContent = `
                    @keyframes blockPulse {
                        0% { transform: translateX(-50%) scale(0.8); opacity: 0; }
                        50% { transform: translateX(-50%) scale(1.1); opacity: 1; }
                        100% { transform: translateX(-50%) scale(1); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(message);
            
            // –£–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (document.body.contains(message)) {
                    document.body.removeChild(message);
                }
            }, 2000);
        }
        
        // üèõÔ∏è –§–£–ù–ö–¶–ò–ò –ì–û–°–î–û–õ–ì–ê
        
        function takeDebt() {
            if (hasBadCredit) {
                showDebtMessage('–ü–ª–æ—Ö–æ–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥! –ì–æ—Å–¥–æ–ª–≥ –≤–∞–º –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω!', 'error');
                return;
            }
            
            if (hasDebt) {
                showDebtMessage('–£ –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –≥–æ—Å–¥–æ–ª–≥!', 'warning');
                return;
            }
            
            if (isBlocked) {
                showDebtMessage('–°–Ω–∞—á–∞–ª–∞ –ø–æ–≥–∞—Å–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –¥–æ–ª–≥!', 'error');
                return;
            }
            
            // –í—ã–¥–∞–µ–º –≥–æ—Å–¥–æ–ª–≥
            balance += 300;
            hasDebt = true;
            debtCasesLeft = 3;
            
            updateBalance();
            updateDebtStatus();
            saveGameData();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
            showDebtWarning();
            
            console.log('üí∞ –ì–æ—Å–¥–æ–ª–≥ –≤–∑—è—Ç: +300 ÍôÆ, –¥–æ–ª–≥ –±—É–¥–µ—Ç —Å–ø–∏—Å–∞–Ω —á–µ—Ä–µ–∑ 3 –∫–µ–π—Å–∞');
        }
        
        function showDebtWarning() {
            const warning = document.createElement('div');
            warning.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #2c3e50, #34495e);
                border: 3px solid #e74c3c;
                border-radius: 20px;
                padding: 20px;
                z-index: 10004;
                text-align: center;
                max-width: 320px;
                width: 90vw;
                box-shadow: 0 10px 30px rgba(0,0,0,0.7);
            `;
            
            // –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                warning.innerHTML = `
                    <h2 style="color: #e74c3c; font-size: 18px; margin-bottom: 12px; line-height: 1.2;">‚ö†Ô∏è –ì–û–°–î–û–õ–ì –í–´–î–ê–ù ‚ö†Ô∏è</h2>
                    <p style="color: #fff; font-size: 13px; margin-bottom: 15px; line-height: 1.3;">
                        –í—ã –≤–∑—è–ª–∏ –≥–æ—Å–¥–æ–ª–≥ —É –°–ü–û.<br>
                        <strong style="color: #ff6b6b;">–í—ã –±—É–¥–µ—Ç–µ –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω—ã, –µ—Å–ª–∏ –Ω–µ —Ä–∞—Å–ø–ª–∞—Ç–∏—Ç–µ—Å—å.</strong>
                    </p>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 12px; margin-bottom: 15px;">
                        <p style="color: #ffd700; font-size: 12px; margin: 0; line-height: 1.3;">
                            üí∞ –ü–æ–ª—É—á–µ–Ω–æ: +300 ÍôÆ<br>
                            üìÖ –ö –≤–æ–∑–≤—Ä–∞—Ç—É: 500 ÍôÆ —á–µ—Ä–µ–∑ 3 –∫–µ–π—Å–∞
                        </p>
                    </div>
                    <button onclick="this.parentElement.remove()" style="
                        background: #e74c3c; color: white; border: none; padding: 10px 20px;
                        border-radius: 8px; font-size: 14px; font-weight: bold; cursor: pointer;
                        width: 100%; max-width: 200px;
                    ">üò∞ –ü–æ–Ω—è—Ç–Ω–æ</button>
                `;
            } else {
                warning.innerHTML = `
                    <h2 style="color: #e74c3c; font-size: 24px; margin-bottom: 15px;">‚ö†Ô∏è –ì–û–°–î–û–õ–ì –í–´–î–ê–ù ‚ö†Ô∏è</h2>
                    <p style="color: #fff; font-size: 16px; margin-bottom: 20px; line-height: 1.4;">
                        –í—ã –≤–∑—è–ª–∏ –≥–æ—Å–¥–æ–ª–≥ —É –°–ü–û.<br>
                        <strong style="color: #ff6b6b;">–í—ã –±—É–¥–µ—Ç–µ –ª–∏–∫–≤–∏–¥–∏—Ä–æ–≤–∞–Ω—ã, –µ—Å–ª–∏ –Ω–µ —Ä–∞—Å–ø–ª–∞—Ç–∏—Ç–µ—Å—å.</strong>
                    </p>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                        <p style="color: #ffd700; font-size: 14px; margin: 0;">
                            üí∞ –ü–æ–ª—É—á–µ–Ω–æ: +300 ÍôÆ<br>
                            üìÖ –ö –≤–æ–∑–≤—Ä–∞—Ç—É: 500 ÍôÆ —á–µ—Ä–µ–∑ 3 –∫–µ–π—Å–∞
                        </p>
                    </div>
                    <button onclick="this.parentElement.remove()" style="
                        background: #e74c3c; color: white; border: none; padding: 12px 25px;
                        border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer;
                    ">üò∞ –ü–æ–Ω—è—Ç–Ω–æ</button>
                `;
            }
            
            document.body.appendChild(warning);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–±–∏—Ä–∞–µ–º —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (document.body.contains(warning)) {
                    document.body.removeChild(warning);
                }
            }, 10000);
        }
        
        function updateDebtStatus() {
            const debtButton = document.getElementById('debtButton');
            const debtStatus = document.getElementById('debtStatus');
            
            if (hasBadCredit) {
                debtButton.style.display = 'none';
                debtStatus.style.display = 'block';
                debtStatus.innerHTML = `üö´ –ü–õ–û–•–û–ô –†–ï–ô–¢–ò–ù–ì`;
                debtStatus.style.color = '#e74c3c';
            } else if (hasDebt && debtCasesLeft > 0) {
                debtButton.style.display = 'none';
                debtStatus.style.display = 'block';
                debtStatus.innerHTML = `‚ö†Ô∏è –î–æ–ª–≥: ${debtCasesLeft} –∫–µ–π—Å–æ–≤ –¥–æ —Å–ø–∏—Å–∞–Ω–∏—è 500 ÍôÆ`;
                debtStatus.style.color = '#ff6b6b';
            } else if (isBlocked) {
                debtButton.style.display = 'none';
                debtStatus.style.display = 'block';
                debtStatus.innerHTML = `üö® –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù–û`;
                debtStatus.style.color = '#e74c3c';
            } else {
                debtButton.style.display = 'block';
                debtStatus.style.display = 'none';
            }
        }
        
        function checkDebtOnCaseOpen() {
            if (!hasDebt || debtCasesLeft <= 0) return;
            
            debtCasesLeft--;
            console.log(`üìâ –ö–µ–π—Å –æ—Ç–∫—Ä—ã—Ç, –æ—Å—Ç–∞–ª–æ—Å—å ${debtCasesLeft} –¥–æ —Å–ø–∏—Å–∞–Ω–∏—è –¥–æ–ª–≥–∞`);
            
            if (debtCasesLeft <= 0) {
                // –í—Ä–µ–º—è –ø–ª–∞—Ç–∏—Ç—å!
                processDebtPayment();
            }
            
            updateDebtStatus();
            saveGameData();
        }
        
        function processDebtPayment() {
            const debtAmount = 500;
            
            if (balance >= debtAmount) {
                // –£—Å–ø–µ—à–Ω–æ —Å–ø–∏—Å—ã–≤–∞–µ–º –¥–æ–ª–≥
                balance -= debtAmount;
                hasDebt = false;
                debtCasesLeft = 0;
                
                updateBalance();
                updateDebtStatus();
                saveGameData();
                
                showDebtMessage(`‚úÖ –ì–æ—Å–¥–æ–ª–≥ –ø–æ–≥–∞—à–µ–Ω! –°–ø–∏—Å–∞–Ω–æ ${debtAmount} ÍôÆ`, 'success');
                console.log('‚úÖ –ì–æ—Å–¥–æ–ª–≥ —É—Å–ø–µ—à–Ω–æ –ø–æ–≥–∞—à–µ–Ω');
            } else {
                // –î–µ–Ω–µ–≥ –Ω–µ—Ç - –±–ª–æ–∫–∏—Ä—É–µ–º –ò –ø–æ—Ä—Ç–∏–º –∫—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥!
                isBlocked = true;
                hasDebt = false;
                debtCasesLeft = 0;
                hasBadCredit = true; // üìâ –ü–û–†–¢–ò–ú –ö–†–ï–î–ò–¢–ù–´–ô –†–ï–ô–¢–ò–ù–ì –ù–ê–í–°–ï–ì–î–ê!
                
                updateDebtStatus();
                showBlockBanner();
                saveGameData();
                
                console.log('üö´ –î–æ–ª–≥ –Ω–µ –ø–æ–≥–∞—à–µ–Ω - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω! –ö—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ –∏—Å–ø–æ—Ä—á–µ–Ω!');
            }
        }
        
        function showBlockBanner() {
            const blockBanner = document.getElementById('blockBanner');
            const blockMessage = document.getElementById('blockMessage');
            const repentButton = document.getElementById('repentButton');
            
            blockMessage.textContent = '–î–æ–ª–≥ –Ω–µ –≤–æ–∑–≤—Ä–∞—â—ë–Ω. –ó–∞ –≤–∞–º–∏ –≤—ã–µ—Ö–∞–ª–∞ –ø—á–µ–ª–∏—Ü–∏—è!';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∫–∞—è–Ω–∏—è –µ—Å–ª–∏ –µ—Å—Ç—å —á—Ç–æ –∑–∞–±—Ä–∞—Ç—å
            if (balance > 0 || inventory.length > 0) { // –õ—é–±–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–ª–∏ –±–∞–ª–∞–Ω—Å
                repentButton.style.display = 'inline-block';
                console.log('üôè –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∫–∞—è–Ω–∏—è - –µ—Å—Ç—å —á—Ç–æ –∑–∞–±—Ä–∞—Ç—å');
            } else {
                repentButton.style.display = 'none';
                console.log('üí° –ù–µ—á–µ–≥–æ –∑–∞–±–∏—Ä–∞—Ç—å - —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞—è–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ');
            }
            
            blockBanner.style.display = 'block';
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–µ–π—Å—ã
            document.querySelector('.cases-section').style.opacity = '0.3';
            document.querySelector('.cases-section').style.pointerEvents = 'none';
        }
        
        function hideBlockBanner() {
            const blockBanner = document.getElementById('blockBanner');
            blockBanner.style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–µ–π—Å—ã
            document.querySelector('.cases-section').style.opacity = '1';
            document.querySelector('.cases-section').style.pointerEvents = 'auto';
        }
        
        function repent() {
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–∫–∞—è–Ω–∏–µ —Å —Å—á—ë—Ç—á–∏–∫–æ–º –∫–ª–∏–∫–æ–≤
            startRepentanceClicking();
        }
        
        function startRepentanceClicking() {
            let clickCount = 0;
            let maxClicks = 500; // –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –º–æ–∂–µ—Ç –±—ã—Ç—å —É–º–µ–Ω—å—à–µ–Ω–∞
            let spoServiceUsed = false; // –§–ª–∞–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–ª—É–∂–±—ã –°–ü–û
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ—Ç–µ—Ä—å
            const oldBalance = balance;
            const oldInventoryCount = inventory.length;
            
            // –°–æ–∑–¥–∞—ë–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞—è–Ω–∏—è —Å —Å—á—ë—Ç—á–∏–∫–æ–º
            const repentanceInterface = document.createElement('div');
            repentanceInterface.id = 'repentance-clicking';
            repentanceInterface.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.3);
                backdrop-filter: blur(3px);
                z-index: 10005;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
            `;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–æ–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
            const isMobile = window.innerWidth <= 768;
            
            const modalContent = `
                <div style="
                    background: linear-gradient(135deg, #27ae60, #229954);
                    border: 3px solid #fff;
                    border-radius: ${isMobile ? '15px' : '20px'};
                    padding: ${isMobile ? '25px 20px' : '40px'};
                    text-align: center;
                    max-width: ${isMobile ? '320px' : '500px'};
                    width: ${isMobile ? '90vw' : 'auto'};
                    box-shadow: 0 10px 30px rgba(0,0,0,0.7);
                    animation: repentGlow 2s ease-in-out infinite;
                ">
                    <h2 style="color: #fff; font-size: ${isMobile ? '20px' : '28px'}; margin-bottom: ${isMobile ? '15px' : '20px'};">üôè –ü–û–ö–ê–Ø–ù–ò–ï üôè</h2>
                    <p id="repent-description" style="color: #fff; font-size: ${isMobile ? '14px' : '18px'}; margin-bottom: ${isMobile ? '20px' : '30px'}; line-height: 1.4;">
                        –î–ª—è –ø—Ä–æ—â–µ–Ω–∏—è –∫–ª–∏–∫–∞–π—Ç–µ –ø–æ –∫–Ω–æ–ø–∫–µ<br>
                        <span id="clicks-required">500</span> —Ä–∞–∑ —Å–æ –∏—Å–∫—Ä–µ–Ω–Ω–∏–º —Ä–∞—Å–∫–∞—è–Ω–∏–µ–º
                    </p>
                    <div style="
                        background: rgba(255,255,255,0.2);
                        border-radius: ${isMobile ? '10px' : '15px'};
                        padding: ${isMobile ? '15px' : '20px'};
                        margin-bottom: ${isMobile ? '20px' : '30px'};
                    ">
                        <div id="repent-counter" style="
                            color: #fff;
                            font-size: ${isMobile ? '24px' : '32px'};
                            font-weight: bold;
                            margin-bottom: 10px;
                        ">0 / 500</div>
                        <div style="
                            background: rgba(255,255,255,0.2);
                            height: ${isMobile ? '8px' : '10px'};
                            border-radius: ${isMobile ? '4px' : '5px'};
                            overflow: hidden;
                        ">
                            <div id="repent-progress" style="
                                background: #fff;
                                height: 100%;
                                width: 0%;
                                transition: width 0.1s ease;
                                border-radius: ${isMobile ? '4px' : '5px'};
                            "></div>
                        </div>
                    </div>
                    <div style="
                        display: flex;
                        flex-direction: ${isMobile ? 'column' : 'row'};
                        gap: ${isMobile ? '10px' : '15px'};
                        align-items: center;
                        justify-content: center;
                        margin-bottom: ${isMobile ? '15px' : '20px'};
                    ">
                        <button id="repent-click-btn" style="
                            background: #fff;
                            color: #27ae60;
                            border: none;
                            padding: ${isMobile ? '15px 30px' : '20px 40px'};
                            border-radius: ${isMobile ? '12px' : '15px'};
                            font-size: ${isMobile ? '16px' : '20px'};
                            font-weight: bold;
                            cursor: pointer;
                            transition: all 0.1s ease;
                            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                            ${isMobile ? 'width: 100%; max-width: 250px;' : ''}
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            üôè –ö–ê–Ø–¢–¨–°–Ø
                        </button>
                        <button id="spo-service-btn" style="
                            background: linear-gradient(135deg, #e74c3c, #c0392b);
                            color: #fff;
                            border: none;
                            padding: ${isMobile ? '12px 20px' : '15px 25px'};
                            border-radius: ${isMobile ? '10px' : '12px'};
                            font-size: ${isMobile ? '13px' : '16px'};
                            font-weight: bold;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
                            ${isMobile ? 'width: 100%; max-width: 250px;' : ''}
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            üèõÔ∏è –°–õ–£–ñ–£ –°–ü–û!
                        </button>
                    </div>
                </div>
                <div id="click-feedback-container" style="
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    pointer-events: none;
                    z-index: 1;
                "></div>
            `;
            
            repentanceInterface.innerHTML = modalContent;
            document.body.appendChild(repentanceInterface);
            
            const counterEl = document.getElementById('repent-counter');
            const progressEl = document.getElementById('repent-progress');
            const buttonEl = document.getElementById('repent-click-btn');
            const spoButtonEl = document.getElementById('spo-service-btn');
            const feedbackContainer = document.getElementById('click-feedback-container');
            const clicksRequiredEl = document.getElementById('clicks-required');
            const repentDescriptionEl = document.getElementById('repent-description');
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–°–õ–£–ñ–£ –°–ü–û!"
            spoButtonEl.onclick = function() {
                if (spoServiceUsed) return; // –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–∑
                
                spoServiceUsed = true;
                maxClicks = 100; // –°–Ω–∏–∂–∞–µ–º –¥–æ 100 –∫–ª–∏–∫–æ–≤
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                clicksRequiredEl.textContent = '100';
                counterEl.textContent = `${clickCount} / 100`;
                repentDescriptionEl.innerHTML = `
                    –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –∑–∞ —Å–ª—É–∂–±—É –°–ü–û!<br>
                    –ö–≤–æ—Ç–∞ —Å–Ω–∏–∂–µ–Ω–∞ –¥–æ <span style="color: #ffeb3b; font-weight: bold;">100 –∫–ª–∏–∫–æ–≤</span>
                `;
                
                // –£–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–∫—É –°–ü–û –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                spoButtonEl.style.display = 'none';
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showServiceMessage();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                const progress = (clickCount / maxClicks) * 100;
                progressEl.style.width = `${progress}%`;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ —É–∂–µ –∫–ª–∏–∫–æ–≤
                if (clickCount >= maxClicks) {
                    setTimeout(() => {
                        finishRepentance(repentanceInterface, oldBalance, oldInventoryCount);
                    }, 1000);
                }
                
                console.log('üèõÔ∏è –°–ª—É–∂–±–∞ –°–ü–û –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞! –ö–≤–æ—Ç–∞ —Å–Ω–∏–∂–µ–Ω–∞ —Å 500 –¥–æ 100 –∫–ª–∏–∫–æ–≤');
            };
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ –ø–æ–∫–∞—è–Ω–∏—è
            buttonEl.onclick = function(e) {
                if (clickCount >= maxClicks) return;
                
                clickCount++;
                const progress = (clickCount / maxClicks) * 100;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á—ë—Ç—á–∏–∫ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
                counterEl.textContent = `${clickCount} / ${maxClicks}`;
                progressEl.style.width = `${progress}%`;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º +1 —ç—Ñ—Ñ–µ–∫—Ç
                showClickFeedback(e.clientX, e.clientY, feedbackContainer);
                
                // –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
                buttonEl.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    buttonEl.style.transform = 'scale(1)';
                }, 100);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
                if (clickCount >= maxClicks) {
                    setTimeout(() => {
                        finishRepentance(repentanceInterface, oldBalance, oldInventoryCount);
                    }, 500);
                }
            };
        }
        
        function showServiceMessage() {
            const message = document.createElement('div');
            message.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #e74c3c, #c0392b);
                color: #fff;
                padding: 15px 25px;
                border-radius: 12px;
                font-weight: bold;
                z-index: 10006;
                animation: serviceSlideIn 0.5s ease-out;
                border: 2px solid #fff;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                text-align: center;
                max-width: 90vw;
            `;
            
            message.innerHTML = `
                üèõÔ∏è <strong>–°–õ–£–ñ–ë–ê –°–ü–û –ó–ê–°–ß–ò–¢–ê–ù–ê!</strong><br>
                <span style="font-size: 14px; color: #ffeb3b;">–ö–≤–æ—Ç–∞ –ø–æ–∫–∞—è–Ω–∏—è —Å–Ω–∏–∂–µ–Ω–∞ –¥–æ 100 –∫–ª–∏–∫–æ–≤!</span>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
            if (!document.getElementById('service-slide-in-style')) {
                const style = document.createElement('style');
                style.id = 'service-slide-in-style';
                style.textContent = `
                    @keyframes serviceSlideIn {
                        0% { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                        100% { transform: translateX(-50%) translateY(0); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(message);
            
            // –£–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (document.body.contains(message)) {
                    message.style.animation = 'serviceSlideIn 0.3s ease-out reverse';
                    setTimeout(() => {
                        if (document.body.contains(message)) {
                            document.body.removeChild(message);
                        }
                    }, 300);
                }
            }, 4000);
        }
        
        function showClickFeedback(x, y, container) {
            const feedback = document.createElement('div');
            feedback.style.cssText = `
                position: absolute;
                left: ${x}px;
                top: ${y}px;
                color: #fff;
                font-size: 24px;
                font-weight: bold;
                pointer-events: none;
                animation: clickFadeUp 1s ease-out forwards;
                z-index: 10;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            `;
            feedback.textContent = '+1';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –µ—Å–ª–∏ –µ—ë –µ—â—ë –Ω–µ—Ç
            if (!document.getElementById('click-fade-up-style')) {
                const style = document.createElement('style');
                style.id = 'click-fade-up-style';
                style.textContent = `
                    @keyframes clickFadeUp {
                        0% {
                            opacity: 1;
                            transform: translate(-50%, -50%) scale(1);
                        }
                        100% {
                            opacity: 0;
                            transform: translate(-50%, -150px) scale(1.5);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            container.appendChild(feedback);
            
            // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                if (container.contains(feedback)) {
                    container.removeChild(feedback);
                }
            }, 1000);
        }
        
        function finishRepentance(interfaceEl, oldBalance, oldInventoryCount) {
            // –ü–æ–ª–Ω–æ–µ –ø–æ–∫–∞—è–Ω–∏–µ - –æ–±–Ω—É–ª—è–µ–º –≤—Å—ë!
            balance = 0;
            inventory = []; // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å (–¥–∞–∂–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç)
            isBlocked = false;
            hasDebt = false;
            debtCasesLeft = 0;
            // hasBadCredit –ù–ï —Å–±—Ä–∞—Å—ã–≤–∞–µ–º - –ø–ª–æ—Ö–æ–π —Ä–µ–π—Ç–∏–Ω–≥ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞!
            
            updateBalance();
            updateInventory();
            updateDebtStatus();
            hideBlockBanner();
            saveGameData();
            
            // üí° –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–æ—Å–ª–µ –ø–æ–∫–∞—è–Ω–∏—è (–±–∞–ª–∞–Ω—Å = 0)
            checkZeroBalance();
            
            // üí° –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É
            checkPendingBonusHint();
            
            // –£–±–∏—Ä–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–ª–∏–∫–æ–≤
            document.body.removeChild(interfaceEl);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–æ–∫–∞—è–Ω–∏–∏
            showRepentanceMessage(oldBalance, oldInventoryCount);
            
            console.log('üôè –ü–æ–∫–∞—è–Ω–∏–µ —Å–æ–≤–µ—Ä—à–µ–Ω–æ - –≤—Å—ë –æ–±–Ω—É–ª–µ–Ω–æ, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–Ω—è—Ç–∞, –Ω–æ –ø–ª–æ—Ö–æ–π —Ä–µ–π—Ç–∏–Ω–≥ –æ—Å—Ç–∞–ª—Å—è!');
        }
        
        function showRepentanceMessage(lostBalance, lostItems) {
            const repentance = document.createElement('div');
            repentance.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(135deg, #27ae60, #229954);
                border: 3px solid #fff;
                border-radius: 20px;
                padding: 30px;
                z-index: 10004;
                text-align: center;
                max-width: 500px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.7);
                animation: repentGlow 2s ease-in-out infinite;
            `;
            
            repentance.innerHTML = `
                <h2 style="color: #fff; font-size: 24px; margin-bottom: 15px;">üôè –ü–û–ö–ê–Ø–ù–ò–ï –ü–†–ò–ù–Ø–¢–û üôè</h2>
                <p style="color: #fff; font-size: 16px; margin-bottom: 20px; line-height: 1.4;">
                    –ü—Ä–æ—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ. –ë–∞–ª–∞–Ω—Å –æ–±–Ω—É–ª—ë–Ω.<br>
                    –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å —É—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –°–ü–û –¥–æ–≤–æ–ª—å–Ω–æ!<br>
                    <strong style="color: #ffeb3b;">–í–∞—à —Ä–µ–π—Ç–∏–Ω–≥ –Ω–æ–ª—å.</strong>
                </p>
                <div style="background: rgba(255,255,255,0.2); border-radius: 10px; padding: 15px; margin-bottom: 20px;">
                    <p style="color: #fff; font-size: 14px; margin: 0;">
                        üí∏ –ü–æ—Ç–µ—Ä—è–Ω–æ: ${lostBalance} ÍôÆ<br>
                        üì¶ –£—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ: ${lostItems} –ø—Ä–µ–¥–º–µ—Ç–æ–≤
                    </p>
                </div>
                <button onclick="this.parentElement.remove()" style="
                    background: #fff; color: #27ae60; border: none; padding: 12px 25px;
                    border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer;
                ">üëç –•–æ—Ä–æ—à–æ</button>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —Å–≤–µ—á–µ–Ω–∏—è
            if (!document.getElementById('repent-glow-style')) {
                const style = document.createElement('style');
                style.id = 'repent-glow-style';
                style.textContent = `
                    @keyframes repentGlow {
                        0%, 100% { 
                            box-shadow: 0 10px 30px rgba(39, 174, 96, 0.7);
                        }
                        50% { 
                            box-shadow: 0 15px 40px rgba(39, 174, 96, 1), 0 0 50px rgba(39, 174, 96, 0.5);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(repentance);
            
            // –ù–ï —É–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - —Ç–æ–ª—å–∫–æ –ø–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É!
        }
        
        function showDebtMessage(message, type) {
            const msgEl = document.createElement('div');
            msgEl.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: bold;
                z-index: 10003;
                animation: slideIn 0.3s ease-out;
            `;
            
            if (type === 'success') {
                msgEl.style.background = 'linear-gradient(135deg, #27ae60, #229954)';
            } else if (type === 'error') {
                msgEl.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
            } else {
                msgEl.style.background = 'linear-gradient(135deg, #f39c12, #d68910)';
            }
            
            msgEl.textContent = message;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
            if (!document.getElementById('slideIn-style')) {
                const style = document.createElement('style');
                style.id = 'slideIn-style';
                style.textContent = `
                    @keyframes slideIn {
                        0% { transform: translateX(100%); opacity: 0; }
                        100% { transform: translateX(0); opacity: 1; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(msgEl);
            
            // –£–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (document.body.contains(msgEl)) {
                    document.body.removeChild(msgEl);
                }
            }, 4000);
        }
        
        // üí° –§–£–ù–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –ù–£–õ–ï–í–û–ì–û –ë–ê–õ–ê–ù–°–ê
        function checkZeroBalance() {
            console.log(`üí° –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞: ${balance} ÍôÆ`);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º: –±–∞–ª–∞–Ω—Å = 0 –ò –ø–æ–¥—Å–∫–∞–∑–∫–∞ –µ—â—ë –Ω–µ –±—ã–ª–∞ –ø–æ–∫–∞–∑–∞–Ω–∞ –ò —Ä—É–ª–µ—Ç–∫–∞ –ù–ï –∞–∫—Ç–∏–≤–Ω–∞
            if (balance === 0 && !bonusHintShown && !isRouletteActive()) {
                console.log('üí° –ë–∞–ª–∞–Ω—Å = 0 –∏ —Ä—É–ª–µ—Ç–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é—à–∫—É BONUS (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)');
                showBonusModal();
            } else if (balance === 0 && !bonusHintShown && isRouletteActive()) {
                console.log('üí° –ë–∞–ª–∞–Ω—Å = 0, –Ω–æ —Ä—É–ª–µ—Ç–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ - –∂–¥—ë–º –µ—ë –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è');
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ—Å–ª–µ —Ä—É–ª–µ—Ç–∫–∏
                pendingBonusHint = true;
            }
        }
        
        // üí° –ü–†–û–í–ï–†–Ø–ï–ú –ê–ö–¢–ò–í–ù–ê –õ–ò –†–£–õ–ï–¢–ö–ê
        function isRouletteActive() {
            const rouletteSection = document.getElementById('rouletteSection');
            return rouletteSection && rouletteSection.classList.contains('active');
        }
        
        // üí° –ü–†–û–í–ï–†–Ø–ï–ú –û–¢–õ–û–ñ–ï–ù–ù–£–Æ –ü–û–î–°–ö–ê–ó–ö–£ –ü–û–°–õ–ï –†–£–õ–ï–¢–ö–ò
        function checkPendingBonusHint() {
            if (pendingBonusHint && balance === 0 && !bonusHintShown) {
                console.log('üí° –†—É–ª–µ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É BONUS');
                pendingBonusHint = false;
                
                // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ UX
                setTimeout(() => {
                    showBonusModal();
                }, 1000);
            }
        }
        
        function showBonusModal() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –º–æ–¥–∞–ª–∫–∏
            if (document.getElementById('bonus-modal')) return;
            
            const modal = document.createElement('div');
            modal.id = 'bonus-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: rgba(0, 0, 0, 0.8);
                z-index: 10007;
                display: flex;
                justify-content: center;
                align-items: center;
                flex-direction: column;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–æ–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
            const isMobile = window.innerWidth <= 768;
            
            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #f39c12, #e67e22);
                    border: 3px solid #fff;
                    border-radius: ${isMobile ? '15px' : '20px'};
                    padding: ${isMobile ? '25px 20px' : '30px'};
                    text-align: center;
                    max-width: ${isMobile ? '320px' : '450px'};
                    width: ${isMobile ? '90vw' : 'auto'};
                    box-shadow: 0 10px 30px rgba(0,0,0,0.7);
                    animation: bonusModalPulse 2s ease-in-out infinite;
                ">
                    <h2 style="color: #fff; font-size: ${isMobile ? '20px' : '24px'}; margin-bottom: ${isMobile ? '15px' : '20px'}; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
                        üí° –ù–ï–¢ –î–ï–ù–ï–ì? üí°
                    </h2>
                    <p style="color: #fff; font-size: ${isMobile ? '16px' : '18px'}; margin-bottom: ${isMobile ? '20px' : '25px'}; line-height: 1.4; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);">
                        –ù–µ —Ä–∞—Å—Å—Ç—Ä–∞–∏–≤–∞–π—Å—è!<br>
                        –£ –Ω–∞—Å –µ—Å—Ç—å <strong style="color: #ffeb3b;">–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥</strong> –¥–ª—è —Ç–µ–±—è!
                    </p>
                    <div style="
                        background: rgba(255,255,255,0.2);
                        border-radius: ${isMobile ? '10px' : '12px'};
                        padding: ${isMobile ? '15px' : '20px'};
                        margin-bottom: ${isMobile ? '20px' : '25px'};
                        border: 1px solid rgba(255,255,255,0.3);
                    ">
                        <p style="color: #fff; font-size: ${isMobile ? '14px' : '16px'}; margin-bottom: 10px;">
                            –í–≤–µ–¥–∏ –ø—Ä–æ–º–æ–∫–æ–¥ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è:
                        </p>
                        <div style="
                            background: rgba(0,0,0,0.3);
                            border-radius: 8px;
                            padding: 10px;
                            border: 1px solid rgba(255,255,255,0.2);
                        ">
                            <div style="color: #ffeb3b; font-size: ${isMobile ? '18px' : '22px'}; font-weight: bold; text-shadow: 0 0 10px #ffeb3b;">
                                BONUS
                            </div>
                            <div style="color: #fff; font-size: ${isMobile ? '12px' : '14px'}; margin-top: 5px;">
                                +200 ÍôÆ –Ω–∞ –±–∞–ª–∞–Ω—Å!
                            </div>
                        </div>
                    </div>
                    <button onclick="closeBonusModal()" style="
                        background: #fff;
                        color: #f39c12;
                        border: none;
                        padding: ${isMobile ? '12px 25px' : '15px 30px'};
                        border-radius: ${isMobile ? '10px' : '12px'};
                        font-size: ${isMobile ? '16px' : '18px'};
                        font-weight: bold;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        box-shadow: 0 3px 10px rgba(0,0,0,0.3);
                        ${isMobile ? 'width: 100%; max-width: 200px;' : ''}
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        üëç –ü–û–ù–Ø–õ!
                    </button>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø—É–ª—å—Å–∞—Ü–∏–∏
            if (!document.getElementById('bonus-modal-pulse-style')) {
                const style = document.createElement('style');
                style.id = 'bonus-modal-pulse-style';
                style.textContent = `
                    @keyframes bonusModalPulse {
                        0%, 100% { 
                            transform: scale(1);
                            box-shadow: 0 10px 30px rgba(243, 156, 18, 0.7);
                        }
                        50% { 
                            transform: scale(1.02);
                            box-shadow: 0 15px 40px rgba(243, 156, 18, 1), 0 0 50px rgba(243, 156, 18, 0.5);
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(modal);
            
            console.log('üí° –ü–æ–∫–∞–∑–∞–Ω–∞ –º–µ–Ω—é—à–∫–∞ —Å –ø—Ä–æ–º–æ–∫–æ–¥–æ–º BONUS');
        }
        
        function closeBonusModal() {
            const modal = document.getElementById('bonus-modal');
            if (modal) {
                document.body.removeChild(modal);
                bonusHintShown = true; // –ü–æ–º–µ—á–∞–µ–º —á—Ç–æ –ø–æ–∫–∞–∑–∞–ª–∏
                saveGameData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥
                console.log('üí° –ú–µ–Ω—é—à–∫–∞ BONUS –∑–∞–∫—Ä—ã—Ç–∞, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º');
            }
        }
        
        // –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–∞, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
        function showMisclickPenalty() {
            console.log('üö´ –§—É–Ω–∫—Ü–∏—è —à—Ç—Ä–∞—Ñ–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ - —Ä—É–ª–µ—Ç–∫–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞');
        }

        // Fallback generated scream sound
        function playGeneratedScream() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create multiple oscillators for a scary sound
                const oscillators = [];
                const gainNode = audioContext.createGain();
                gainNode.connect(audioContext.destination);
                
                // Create chaotic frequency sweep
                for (let i = 0; i < 3; i++) {
                    const osc = audioContext.createOscillator();
                    const oscGain = audioContext.createGain();
                    
                    osc.connect(oscGain);
                    oscGain.connect(gainNode);
                    
                    // Scary frequency ranges
                    const startFreq = 100 + (i * 200);
                    const endFreq = 800 + (i * 300);
                    
                    osc.frequency.setValueAtTime(startFreq, audioContext.currentTime);
                    osc.frequency.exponentialRampToValueAtTime(endFreq, audioContext.currentTime + 0.5);
                    osc.frequency.exponentialRampToValueAtTime(startFreq * 0.5, audioContext.currentTime + 1);
                    
                    oscGain.gain.setValueAtTime(0.2, audioContext.currentTime);
                    oscGain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                    
                    osc.type = i % 2 === 0 ? 'sawtooth' : 'square'; // Harsh waveforms
                    osc.start();
                    osc.stop(audioContext.currentTime + 1);
                    
                    oscillators.push(osc);
                }
                
                // Main volume envelope
                gainNode.gain.setValueAtTime(0.6, audioContext.currentTime); // Loud start
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
            } catch (e) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ —Å–∫—Ä–∏–º–µ—Ä–∞:', e);
            }
        }

        // üí° –§–õ–ê–ì–ò –ü–û–ö–ê–ó–ê –ü–û–î–°–ö–ê–ó–ö–ò BONUS
        let bonusHintShown = false; // –ü–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å –ª–∏ —É–∂–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞ BONUS
        let pendingBonusHint = false; // –û–∂–∏–¥–∞–µ—Ç –ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä—É–ª–µ—Ç–∫–∏
        
        // LocalStorage functions
        function saveGameData() {
            const gameData = {
                balance: balance,
                inventory: inventory,
                nickname: userNickname,
                avatar: userAvatar,
                winglistItems: winglistItems,
                usedPromocodes: usedPromocodes,
                hasDebt: hasDebt,
                debtCasesLeft: debtCasesLeft,
                isBlocked: isBlocked,
                hasBadCredit: hasBadCredit,
                bonusHintShown: bonusHintShown, // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥ –ø–æ–∫–∞–∑–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                pendingBonusHint: pendingBonusHint // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–ª–∞–≥ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–∏
            };
            localStorage.setItem('caseOpenerGameData', JSON.stringify(gameData));
        }

        function loadGameData() {
            const savedData = localStorage.getItem('caseOpenerGameData');
            if (savedData) {
                try {
                    const gameData = JSON.parse(savedData);
                    balance = gameData.balance || 1000;
                    inventory = gameData.inventory || [
                        { name: '–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç', image: 'dropcase1_1', rarity: 'common', value: 10 }
                    ];
                    userNickname = gameData.nickname || '–ò–≥—Ä–æ–∫';
                    userAvatar = gameData.avatar || null;
                    winglistItems = gameData.winglistItems || [];
                    usedPromocodes = gameData.usedPromocodes || [];
                    hasDebt = gameData.hasDebt || false;
                    debtCasesLeft = gameData.debtCasesLeft || 0;
                    isBlocked = gameData.isBlocked || false;
                    hasBadCredit = gameData.hasBadCredit || false;
                    bonusHintShown = gameData.bonusHintShown || false; // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–ª–∞–≥ –ø–æ–∫–∞–∑–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                    pendingBonusHint = gameData.pendingBonusHint || false; // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–ª–∞–≥ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–∏
                } catch (e) {
                    console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
                }
            }
        }

        // Winglist functionality
        let winglistItems = [];
        let winglistExpanded = false;

        function addToWinglist(item) {
            winglistItems.unshift({
                user: userNickname,
                item: item,
                timestamp: new Date()
            });
            
            // Keep only last 10 items instead of 5
            if (winglistItems.length > 10) {
                winglistItems = winglistItems.slice(0, 10);
            }
            
            updateWinglist();
        }

        function updateWinglist() {
            const winglistContainer = document.getElementById('winglist-items');
            const winglistToggle = document.getElementById('winglist-toggle');
            winglistContainer.innerHTML = '';
            
            winglistItems.forEach((entry, index) => {
                const itemEl = document.createElement('div');
                itemEl.className = 'winglist-item';
                
                // Hide items after 2nd if not expanded
                if (!winglistExpanded && index >= 2) {
                    itemEl.classList.add('hidden');
                }
                
                itemEl.innerHTML = `
                    <div style="font-weight: bold; color: #fff;">${entry.user}</div>
                    <div style="color: #ffd700;">${entry.item.name}</div>
                    <div style="color: #ccc;">${entry.item.value} ÍôÆ</div>
                `;
                winglistContainer.appendChild(itemEl);
            });
            
            // Show toggle button only if more than 2 items
            if (winglistItems.length > 2) {
                winglistToggle.style.display = 'block';
                winglistToggle.innerHTML = winglistExpanded ? 
                    '–°–≤–µ—Ä–Ω—É—Ç—å ‚ñ≤' : 
                    `–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ (${winglistItems.length}) ‚ñº`;
            } else {
                winglistToggle.style.display = 'none';
            }
        }

        function toggleWinglist() {
            winglistExpanded = !winglistExpanded;
            
            const hiddenItems = document.querySelectorAll('.winglist-item.hidden');
            const winglistContainer = document.getElementById('winglist-items');
            
            if (winglistExpanded) {
                // Show all items
                hiddenItems.forEach(item => {
                    item.classList.remove('hidden');
                });
                winglistContainer.classList.add('expanded');
            } else {
                // Hide items after 2nd
                const allItems = document.querySelectorAll('.winglist-item');
                allItems.forEach((item, index) => {
                    if (index >= 2) {
                        item.classList.add('hidden');
                    }
                });
                winglistContainer.classList.remove('expanded');
            }
            
            updateWinglist();
        }

        // Countdown timer
        let countdownTime = 3 * 60 * 60 + 25 * 60; // 3 hours 25 minutes in seconds

        function updateCountdown() {
            const hours = Math.floor(countdownTime / 3600);
            const minutes = Math.floor((countdownTime % 3600) / 60);
            const seconds = countdownTime % 60;
            
            const timerDisplay = document.getElementById('countdownTimer');
            timerDisplay.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            if (countdownTime > 0) {
                countdownTime--;
            } else {
                // Reset timer when it reaches 0
                countdownTime = 3 * 60 * 60 + 25 * 60;
            }
        }

        // Start countdown timer
        setInterval(updateCountdown, 1000);

        // Initialize case images
        function initializeCaseImages() {
            document.querySelectorAll('.case-image').forEach(caseImageEl => {
                const caseNum = caseImageEl.dataset.caseNum;
                const closedImg = new Image();
                const openImg = new Image();
                
                closedImg.onload = () => {
                    caseImageEl.style.backgroundImage = `url('case${caseNum}_closed.png')`;
                };
                closedImg.onerror = () => {
                    // Generate fallback image
                    caseImageEl.style.backgroundImage = `url('keys/case${caseNum}_closed?prompt=treasure%20chest%20case%20box%20closed%20game%20item')`;
                };
                closedImg.src = `case${caseNum}_closed.png`;
                
                // Preload open image
                openImg.src = `case${caseNum}_open.png`;
            });
        }

        // –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–≤—É–∫–æ–≤
        let rollSound = null;
        let dropSound = null;
        let rareDropSound = null;
        let epicDropSound = null;
        let legendaryDropSound = null;
        let expensiveDropSound = null;

        // Sound effect for roulette
        function playRouletteSound() {
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∞—É–¥–∏–æ –æ–±—ä–µ–∫—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            if (!rollSound) {
                rollSound = new Audio();
                rollSound.volume = 0.4;
                rollSound.loop = false; // –ù–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–µ–º
            }
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–≤—É–∫ –µ—Å–ª–∏ –∏–≥—Ä–∞–µ—Ç
            if (!rollSound.paused) {
                rollSound.pause();
                rollSound.currentTime = 0;
            }
            
            // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∑–≤—É–∫
            rollSound.oncanplaythrough = () => {
                rollSound.play().catch(() => {
                    // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–≤—É–∫
                    playGeneratedRouletteSound();
                });
            };
            
            rollSound.onerror = () => {
                // –ï—Å–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π –∑–≤—É–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
                playGeneratedRouletteSound();
            };
            
            rollSound.src = 'roulette_sound.mp3';
        }

        // –ó–≤—É–∫ –≤—ã–ø–∞–¥–µ–Ω–∏—è –¥—Ä–æ–ø–∞
        function playDropSound() {
            if (!dropSound) {
                dropSound = new Audio();
                dropSound.volume = 0.6;
            }
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ —Ä—É–ª–µ—Ç–∫–∏ –µ—Å–ª–∏ –∏–≥—Ä–∞–µ—Ç
            if (rollSound && !rollSound.paused) {
                rollSound.pause();
                rollSound.currentTime = 0;
            }
            
            dropSound.oncanplaythrough = () => {
                dropSound.play().catch(() => {
                    console.log('üéµ –ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–≤—É–∫ drop_sound.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
                });
            };
            
            dropSound.onerror = () => {
                console.log('üéµ drop_sound.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
            };
            
            dropSound.src = 'drop_sound.mp3';
        }

        // Fallback generated roulette sound
        function playGeneratedRouletteSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // –ó–≤—É–∫ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Ä—É–ª–µ—Ç–∫–∏ - –Ω–∞—Ä–∞—Å—Ç–∞—é—â–∏–π –≥—É–ª
                oscillator.frequency.setValueAtTime(100, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 3);
                oscillator.frequency.exponentialRampToValueAtTime(150, audioContext.currentTime + 5);
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime + 1);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 5);
                
                oscillator.type = 'sawtooth';
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 5);
            } catch (e) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫ —Ä—É–ª–µ—Ç–∫–∏:', e);
            }
        }

        // üéµ –°–ò–°–¢–ï–ú–ê –ó–í–£–ö–û–í –î–õ–Ø –†–ï–î–ö–ò–• –î–†–û–ü–û–í
        function playDropSoundByRarity(item) {
            const value = item.value;
            const rarity = item.rarity;
            
            console.log(`üéµ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–≤—É–∫ –¥–ª—è –¥—Ä–æ–ø–∞: ${item.name} (${rarity}, ${value} ÍôÆ)`);
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–≤—É–∫–æ–≤:
            // 1. –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –¥—Ä–æ–ø (legendary)
            // 2. –û—á–µ–Ω—å –¥–æ—Ä–æ–≥–æ–π –¥—Ä–æ–ø (500+ ÍôÆ)
            // 3. –≠–ø–∏—á–µ—Å–∫–∏–π –¥—Ä–æ–ø (epic)
            // 4. –î–æ—Ä–æ–≥–æ–π –¥—Ä–æ–ø (200+ ÍôÆ)
            // 5. –†–µ–¥–∫–∏–π –¥—Ä–æ–ø (rare)
            // 6. –û–±—ã—á–Ω—ã–π –∑–≤—É–∫ –¥—Ä–æ–ø–∞
            
            if (rarity === 'legendary') {
                playLegendaryDropSound();
            } else if (value >= 500) {
                playExpensiveDropSound();
            } else if (rarity === 'epic') {
                playEpicDropSound();
            } else if (value >= 200) {
                playExpensiveDropSound();
            } else if (rarity === 'rare') {
                playRareDropSound();
            } else {
                playDropSound(); // –û–±—ã—á–Ω—ã–π –∑–≤—É–∫ –¥–ª—è common –¥—Ä–æ–ø–æ–≤
            }
        }
        
        // üéµ –ó–í–£–ö –î–õ–Ø –†–ï–î–ö–ò–• –î–†–û–ü–û–í (RARE)
        function playRareDropSound() {
            if (!rareDropSound) {
                rareDropSound = new Audio();
                rareDropSound.volume = 0.7;
            }
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ —Ä—É–ª–µ—Ç–∫–∏
            if (rollSound && !rollSound.paused) {
                rollSound.pause();
                rollSound.currentTime = 0;
            }
            
            rareDropSound.oncanplaythrough = () => {
                rareDropSound.play().catch(() => {
                    console.log('üéµ –ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–≤—É–∫ rare_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
                });
            };
            
            rareDropSound.onerror = () => {
                console.log('üéµ rare_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
            };
            
            console.log('üéµ –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å rare_drop.mp3...');
            rareDropSound.src = 'rare_drop.mp3';
        }
        
        // üéµ –ó–í–£–ö –î–õ–Ø –≠–ü–ò–ß–ï–°–ö–ò–• –î–†–û–ü–û–í (EPIC)
        function playEpicDropSound() {
            if (!epicDropSound) {
                epicDropSound = new Audio();
                epicDropSound.volume = 0.8;
            }
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ —Ä—É–ª–µ—Ç–∫–∏
            if (rollSound && !rollSound.paused) {
                rollSound.pause();
                rollSound.currentTime = 0;
            }
            
            epicDropSound.oncanplaythrough = () => {
                epicDropSound.play().catch(() => {
                    console.log('üéµ –ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–≤—É–∫ epic_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
                });
            };
            
            epicDropSound.onerror = () => {
                console.log('üéµ epic_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
            };
            
            console.log('üéµ –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å epic_drop.mp3...');
            epicDropSound.src = 'epic_drop.mp3';
        }
        
        // üéµ –ó–í–£–ö –î–õ–Ø –õ–ï–ì–ï–ù–î–ê–†–ù–´–• –î–†–û–ü–û–í (LEGENDARY)
        function playLegendaryDropSound() {
            if (!legendaryDropSound) {
                legendaryDropSound = new Audio();
                legendaryDropSound.volume = 0.9;
            }
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ —Ä—É–ª–µ—Ç–∫–∏
            if (rollSound && !rollSound.paused) {
                rollSound.pause();
                rollSound.currentTime = 0;
            }
            
            legendaryDropSound.oncanplaythrough = () => {
                legendaryDropSound.play().catch(() => {
                    console.log('üéµ –ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–≤—É–∫ legendary_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
                });
            };
            
            legendaryDropSound.onerror = () => {
                console.log('üéµ legendary_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
            };
            
            console.log('üéµ –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å legendary_drop.mp3...');
            legendaryDropSound.src = 'legendary_drop.mp3';
        }
        
        // üéµ –ó–í–£–ö –î–õ–Ø –î–û–†–û–ì–ò–• –î–†–û–ü–û–í (200+ ÍôÆ)
        function playExpensiveDropSound() {
            if (!expensiveDropSound) {
                expensiveDropSound = new Audio();
                expensiveDropSound.volume = 0.75;
            }
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ —Ä—É–ª–µ—Ç–∫–∏
            if (rollSound && !rollSound.paused) {
                rollSound.pause();
                rollSound.currentTime = 0;
            }
            
            expensiveDropSound.oncanplaythrough = () => {
                expensiveDropSound.play().catch(() => {
                    console.log('üéµ –ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–≤—É–∫ expensive_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
                });
            };
            
            expensiveDropSound.onerror = () => {
                console.log('üéµ expensive_drop.mp3 –Ω–µ –Ω–∞–π–¥–µ–Ω');
            };
            
            console.log('üéµ –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å expensive_drop.mp3...');
            expensiveDropSound.src = 'expensive_drop.mp3';
        }
        




        // Add event listeners to cases
        document.querySelectorAll('.case').forEach(caseEl => {
            const caseImageEl = caseEl.querySelector('.case-image');
            const caseNum = caseImageEl.dataset.caseNum;
            
            caseEl.addEventListener('click', () => {
                const caseType = caseEl.dataset.case;
                const price = parseInt(caseEl.dataset.price);
                
                // üõ°Ô∏è –ü–†–û–í–ï–†–Ø–ï–ú –ö–£–õ–î–ê–£–ù –ü–ï–†–ï–î –í–´–ó–û–í–û–ú
                const now = Date.now();
                if (caseCooldowns[caseType] && now - caseCooldowns[caseType] < 2000) {
                    const remainingTime = Math.ceil((2000 - (now - caseCooldowns[caseType])) / 1000);
                    console.log(`‚è∞ –ö–µ–π—Å –Ω–∞ –∫—É–ª–¥–∞—É–Ω–µ! –û—Å—Ç–∞–ª–æ—Å—å: ${remainingTime}—Å`);
                    
                    // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                    caseEl.style.transform = 'scale(0.95)';
                    caseEl.style.opacity = '0.6';
                    setTimeout(() => {
                        caseEl.style.transform = '';
                        caseEl.style.opacity = '';
                    }, 200);
                    return;
                }
                
                // Always allow clicks, handle insufficient funds in openCase
                openCase(caseType, price);
            });
            
            // Hover effects
            caseEl.addEventListener('mouseenter', () => {
                const openImg = new Image();
                openImg.onload = () => {
                    caseImageEl.style.backgroundImage = `url('case${caseNum}_open.png')`;
                };
                openImg.onerror = () => {
                    caseImageEl.style.backgroundImage = `url('keys/case${caseNum}_open?prompt=treasure%20chest%20case%20box%20open%20game%20item')`;
                };
                openImg.src = `case${caseNum}_open.png`;
            });
            
            caseEl.addEventListener('mouseleave', () => {
                const closedImg = new Image();
                closedImg.onload = () => {
                    caseImageEl.style.backgroundImage = `url('case${caseNum}_closed.png')`;
                };
                closedImg.onerror = () => {
                    caseImageEl.style.backgroundImage = `url('keys/case${caseNum}_closed?prompt=treasure%20chest%20case%20box%20closed%20game%20item')`;
                };
                closedImg.src = `case${caseNum}_closed.png`;
            });
        });

        // Avatar loading
        function loadAvatar() {
            const avatarEl = document.getElementById('profileAvatar');
            
            if (userAvatar) {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                avatarEl.style.backgroundImage = `url('${userAvatar}')`;
                avatarEl.style.backgroundSize = 'cover';
                avatarEl.style.backgroundPosition = 'center';
                avatarEl.textContent = '';
                console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –∞–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            } else {
                // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å avatar.png –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
                const avatarImg = new Image();
                
                avatarImg.onload = () => {
                    avatarEl.style.backgroundImage = `url('avatar.png')`;
                    avatarEl.style.backgroundSize = 'cover';
                    avatarEl.style.backgroundPosition = 'center';
                    avatarEl.textContent = '';
                    console.log('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω avatar.png');
                };
                
                avatarImg.onerror = () => {
                    // –û—Å—Ç–∞–≤–ª—è–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä
                    avatarEl.style.backgroundImage = 'none';
                    avatarEl.textContent = 'üêµ';
                    console.log('üì∑ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∞–≤–∞—Ç–∞—Ä');
                };
                
                avatarImg.src = 'avatar.png';
            }
        }

        // Initialize
        loadGameData();
        updateBalance();
        updateInventory();
        updateDebtStatus();
        initializeCaseImages();
        updateWinglist();
        updateCountdown();
        loadAvatar();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        if (isBlocked) {
            showBlockBanner();
        }
        
        // üí° –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–ª–µ–≤–æ–π –±–∞–ª–∞–Ω—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        checkZeroBalance();
    </script>
</body>
</html>
